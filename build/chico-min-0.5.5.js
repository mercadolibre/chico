/**
  * Chico-UI
  * Packer-o-matic
  * Like the pizza delivery service: "Les than 100 milisecons delivery guarantee!"
  * @components: core, positioner, object, floats, navs, controllers, watcher, sliders, carousel, dropdown, layer, modal, tabNavigator, tooltip, string, number, custom, required, helper, form, viewer, chat, expando, codelighter
  * @version 0.4
  * @autor Chico Team <chico@mercadolibre.com>
  *
  * @based on:
  * JSMin
  * @author Ryan Grove <ryan@wonko.com> 
  * @copyright 2002 Douglas Crockford <douglas@crockford.com> (jsmin.c) 
  * @copyright 2008 Ryan Grove <ryan@wonko.com> (PHP port) 
  * @link http://code.google.com/p/jsmin-php/ 
  */
;(function($){

var start=new Date().getTime();var ui=window.ui={version:"0.5.5",components:"carousel,dropdown,layer,modal,tabNavigator,tooltip,string,number,custom,required,helper,form,viewer,chat,expando,codelighter",internals:"positioner,object,floats,navs,controllers,watcher,sliders",instances:{},features:{},init:function(){$("html").removeClass("no-js");ui.features=ui.support();ui.components=(window.components)?ui.components+","+window.components:ui.components;ui.internals=(window.internals)?ui.internals+","+window.internals:ui.internals;$(ui.components.split(",")).each(function(i,e){ui.factory({component:e});});},utils:{body:$('body'),html:$('html'),window:$(window),document:$(document),zIndex:1000,index:0},events:{CHANGE_LAYOUT:"changeLayout"}};ui.preload=function(arr){if(typeof arr==="string"){arr=(arr.indexOf(",")>0)?arr.split(","):[arr];}
for(var i=0;i<arr.length;i++){var o=document.createElement("object");o.data=arr[i];var h=document.getElementsByTagName("head")[0];h.appendChild(o);h.removeChild(o);}};ui.factory=function(o){if(!o){alert("Factory fatal error: Need and object {component:\"\"} to configure a component.");return;};if(!o.component){alert("Factory fatal error: No component defined.");return;};var x=o.component;var create=function(x){$.fn[x]=function(options){var results=[];var that=this;var _arguments=arguments;that.each(function(i,e){var conf=options||{};var context={};context.type=x;context.element=e;context.$element=$(e);context.uid=ui.utils.index+=1;switch(typeof conf){case"number":var num=conf;conf={};conf.value=num;if(_arguments[1]){conf.msg=_arguments[1];};break;case"string":var msg=conf;conf={};conf.msg=msg;break;case"function":var func=conf;conf={};conf.lambda=func;if(_arguments[1]){conf.msg=_arguments[1];};break;};var created=ui[x].call(context,conf);created=(created.hasOwnProperty("public"))?created.public:created;if(created.type){var type=created.type;if(!ui.instances[type]){ui.instances[type]=[];}
ui.instances[type].push(created);}
if(created.exists){created=created.object;}
results.push(created);});return(results.length>1)?results:results[0];};if(o.callback){o.callback();}}
if(ui[o.component]){create(o.component);}else{ui.get({"method":"component","component":o.component,"script":(o.script)?o.script:"src/js/"+o.component+".js","styles":(o.style)?o.style:"src/css/"+x+".css","callback":create});}}
ui.get=function(o){switch(o.method){case"content":var that=o.that;var conf=that.conf;var context=(that.controller)?that.controller.public:that.public;$.ajax({url:conf.ajaxUrl,type:conf.ajaxType||'GET',data:conf.ajaxParams,cache:true,async:true,success:function(data,textStatus,xhr){that.$content.html(data);if(conf.onContentLoad)conf.onContentLoad.call(context);if(conf.position)ui.positioner(conf.position);},error:function(xhr,textStatus,errorThrown){data=(conf.hasOwnProperty("onContentError"))?conf.onContentError.call(context,xhr,textStatus,errorThrown):"<p>Error on ajax call </p>";that.$content.html(data);if(conf.position)ui.positioner(conf.position);}});break;case"component":if(o.style){var style=document.createElement('link');style.href=o.style;style.rel='stylesheet';style.type='text/css';}
if(o.script){var script=document.createElement("script");script.src=o.script;}
var head=document.getElementsByTagName("head")[0]||document.documentElement;var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;if(o.callback){o.callback(o.component);}
script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}}};if(o.script){head.insertBefore(script,head.firstChild);}
if(o.style){head.appendChild(style);}
break;}}
ui.support=function(){var transition=(function(){var thisBody=document.body||document.documentElement;var thisStyle=thisBody.style;return thisStyle.WebkitTransition!==undefined||thisStyle.MozTransition!==undefined||thisStyle.OTransition!==undefined||thisStyle.transition!==undefined;})();return{transition:transition};};ui.cache={map:{},add:function(url,data){ui.cache.map[url]=data;},get:function(url){return ui.cache.map[url];},rem:function(url){ui.cache.map[url]=null;delete ui.cache.map[url];},flush:function(){delete ui.cache.map;ui.cache.map={};}};ui.clon=function(o){obj={};for(x in o){obj[x]=o[x];};return obj;};$(function(){var now=new Date().getTime();ui.loadTime=now-start;});ui.positioner=function(o){var o=o||this.conf.position;var element=$(o.element);var context;var viewport;var parentRelative;o.points=o.points||"cm cm";o.offset=o.offset||"0 0";var classReferences={"lt lb":"down","lb lt":"top","rt rb":"down","rb rt":"top","lt rt":"right","cm cm":"center"};var splittedOffset=o.offset.split(" ");var offset_left=parseInt(splittedOffset[0]);var offset_top=parseInt(splittedOffset[1]);var getViewport=(typeof window.innerWidth!="undefined")?function getViewport(){var viewport,width,height,left,top,pageX,pageY,scrollBar=30;viewport=window;width=viewport.innerWidth-scrollBar;height=viewport.innerHeight;pageX=viewport.pageXOffset;pageY=viewport.pageYOffset;return{element:viewport,left:0+offset_left+pageX-scrollBar,top:0+offset_top+pageY,bottom:height+pageY,right:width+pageX,width:width,height:height}}:function getViewport(){var viewport,width,height,left,top,pageX,pageY,scrollBar=30;viewport=document.documentElement;width=viewport.clientWidth-scrollBar;height=viewport.clientHeight;pageX=viewport.scrollLeft;pageY=viewport.scrollTop;return{element:viewport,left:0+offset_left+pageX,top:0+offset_top+pageY,bottom:height+pageY,right:width+pageX,width:width,height:height}};var getPosition=function(unitPoints){var contextLeft=context.left;var contextTop=context.top;var contextWidth=context.width;var contextHeight=context.height;var elementWidth=element.outerWidth();var elementHeight=element.outerHeight();var xReferences={ll:contextLeft,lr:contextLeft+contextWidth,rr:contextLeft+contextWidth-elementWidth,cc:contextLeft+contextWidth/2-elementWidth/2}
var yReferences={tt:contextTop,tb:contextTop+contextHeight,bt:contextTop-elementHeight,mm:contextTop+contextHeight/2-elementHeight/2}
var axis={left:xReferences[unitPoints.my_x+unitPoints.at_x],top:yReferences[unitPoints.my_y+unitPoints.at_y]}
return axis;};var calculatePoints=function(points,unitPoints){var styles=getPosition(unitPoints);styles.direction=classReferences[points];if(o.hold)return styles;if((points=="lt lb")&&((styles.top+parentRelative.top+element.outerHeight())>viewport.bottom)){unitPoints.my_y="b";unitPoints.at_y="t";stylesDown=styles;styles=getPosition(unitPoints);styles.direction="top";styles.top-=(2*offset_top);if(styles.top+parentRelative.top<viewport.top){unitPoints.my_y="t";unitPoints.at_y="b";styles=stylesDown;styles.direction="down";};};if((styles.left+parentRelative.left+element.outerWidth())>viewport.right){unitPoints.my_x="r";unitPoints.at_x="r";stylesLeft=styles;var current=styles.direction;styles=getPosition(unitPoints);styles.direction=current+"-right";styles.left-=(2*offset_left);if(current=="top")styles.top-=(2*offset_top);if(styles.left<viewport.left){unitPoints.my_y="l";unitPoints.at_y="l";styles=stylesLeft;};};return styles;};var setPosition=function(){var splitted=o.points.split(" ");var unitPoints={my_x:splitted[0].slice(0,1),my_y:splitted[0].slice(1,2),at_x:splitted[1].slice(0,1),at_y:splitted[1].slice(1,2)}
var styles=calculatePoints(o.points,unitPoints);element.css({left:styles.left,top:styles.top}).removeClass("ch-top ch-left ch-down ch-right ch-down-right ch-top-right  ch-right-right").addClass("ch-"+styles.direction);if(context.hasOwnProperty("element")&&context.element!==ui.utils.window[0]){$(context.element).removeClass("ch-top ch-left ch-down ch-right ch-down-right ch-top-right ch-right-right").addClass("ch-"+styles.direction);};};var getContext=(o.context)?function getContext(){var contextOffset=o.context.offset();context={element:o.context,top:contextOffset.top+offset_top-parentRelative.top,left:contextOffset.left+offset_left-parentRelative.left,width:o.context.outerWidth(),height:o.context.outerHeight()};return context;}:function getContext(){return viewport;};var getParentRelative=function(){var relative={};relative.left=0;relative.top=0;element.parents().each(function(i,e){if($(e).css("position")!="relative")return;var borderLeft=($(e).outerWidth()-$(e).width()-(parseInt($(e).css("padding-left"))*2))/2;relative=$(e).offset();relative.left-=offset_left-borderLeft;relative.top-=offset_top;return false;});return{left:relative.left,top:relative.top};};var initPosition=function(){viewport=getViewport();parentRelative=getParentRelative();context=getContext();setPosition();};var scrolled=false;initPosition();ui.utils.window.bind("resize scroll",function(){scrolled=true;});setInterval(function(){if(!scrolled)return;scrolled=false;if(element.css("display")==="none")return;initPosition();},250);return $(element);};ui.object=function(){var that=this;var conf=that.conf;that.prevent=function(event){if(event&&typeof event=="object"){event.preventDefault();event.stopPropagation();};return that;};that.loadContent=function(){if(conf.ajax===true){conf.ajaxUrl=that.$element.attr('href')||that.$element.parents('form').attr('action');conf.ajaxParams='x=x';if(that.$element.attr('type')=='submit'){conf.ajaxType=that.$element.parents('form').attr('method')||'GET';var serialized=that.$element.parents('form').serialize();conf.ajaxParams=conf.ajaxParams+((serialized!='')?'&'+serialized:'');};ui.get({method:"content",that:that});return'<div class="loading"></div>';}else if(conf.ajax||(conf.msg&&conf.msg.match(/(?:(?:(https?|file):\/\/)([^\/]+)(\/(?:[^\s])+)?)|(\/(?:[^\s])+)/g))){conf.ajaxUrl=conf.ajax||conf.msg;conf.ajaxParams='x=x';ui.get({method:"content",that:that});return'<div class="loading"></div>';}else{var content=conf.content||conf.msg;return($(content).length>0)?$(content).clone().show():content;};};that.callbacks=function(when){if(conf.hasOwnProperty(when)){var context=(that.controller)?that.controller.public:that.public;return conf[when].call(context);};};that.position=function(o){switch(typeof o){case"object":conf.position.context=o.context||conf.position.context;conf.position.points=o.points||conf.position.points;conf.position.offset=o.offset||conf.position.offset;conf.position.fixed=o.fixed||conf.position.fixed;ui.positioner(conf.position);return that.public;break;case"string":if(o!="refresh"){alert("ChicoUI error: position() expected to find \"refresh\" parameter.");};ui.positioner(conf.position);return that.public;break;case"undefined":return conf.position;break;};};that.public={};return that;};ui.floats=function(){var that=this;var conf=that.conf;that=ui.object.call(that);that.parent=ui.clon(that);var createCone=function(){$('<div class="ch-cone"></div>').prependTo(that.$container);return;};var createClose=function(){$('<p>').addClass("btn ch-close").css("z-index",ui.utils.zIndex++).bind('click',function(event){that.hide(event)}).prependTo(that.$container);return;};var createLayout=function(){that.$container=$("<div class=\"ch-"+that.type+"\"><div class=\"ch-"+that.type+"-content\"></div></div>").appendTo("body").hide();that.$content=that.$container.find(".ch-"+that.type+"-content");conf.position=conf.position||{};conf.position.element=that.$container;conf.position.hold=conf.hold||false;conf.cache=(conf.hasOwnProperty("cache"))?conf.cache:true;if(conf.closeButton)createClose();if(conf.cone)createCone();if(conf.classes)that.$container.addClass(conf.classes);if(conf.hasOwnProperty("width"))that.$container.css("width",conf.width);if(conf.hasOwnProperty("height"))that.$container.css("height",conf.height);that.$content.html(that.loadContent(that));that.$container.css("z-index",ui.utils.zIndex++).fadeIn('fast',function(){that.callbacks('onShow');});ui.positioner.call(that);return;};that.active=false;that.show=function(event){if(event)that.prevent(event);if(that.active)return;that.active=true;if(that.$container){if(!conf.cache)that.$content.html(that.loadContent());that.$container.appendTo("body").css("z-index",ui.utils.zIndex++).fadeIn('fast',function(){that.active=true;that.callbacks('onShow');});that.position("refresh");return that;};createLayout();return that;};that.hide=function(event){if(event)that.prevent(event);if(!that.active)return;that.$container.fadeOut('fast',function(){that.active=false;that.callbacks('onHide');$(this).detach();});return that;};return that;};ui.navs=function(){var that=this;var conf=that.conf;that=ui.object.call(that);that.parent=ui.clon(that);that.active=false;that.show=function(event){that.prevent(event);if(that.active)return;that.active=true;that.$trigger.addClass("ch-"+that.type+"-on");that.$content.show();that.callbacks("onShow");return that;};that.hide=function(event){that.prevent(event);if(!that.active)return;that.active=false;that.$trigger.removeClass("ch-"+that.type+"-on");that.$content.hide();that.callbacks("onHide");return that;};return that;}
ui.controllers=function(){var that=this;that=ui.object.call(that);that.parent=ui.clon(that);that.children=[];return that;};ui.watcher=function(conf){var that=this;that.conf=conf;that=ui.object.call(that);that.parent=ui.clon(that);var controller=(function(){if(ui.instances.hasOwnProperty("form")&&ui.instances.form.length>0){var i=0,j=ui.instances.form.length;for(i;i<j;i++){if(ui.instances.form[i].element===that.$element.parents("form")[0]){return ui.instances.form[i];};};}else{that.$element.parents("form").form();var last=(ui.instances.form.length-1);return ui.instances.form[last];};})();var checkInstance=function(){var instance=ui.instances.watcher;if(instance&&instance.length>0){for(var i=0,j=instance.length;i<j;i++){if(instance[i].element!==that.element)continue;$.extend(instance[i].validations,that.validations);$.extend(instance[i].conditions,that.conditions);$.extend(instance[i].messages,that.messages);instance[i].types=mergeTypes(instance[i].types);return{exists:true,object:instance[i]};};};};var mergeTypes=function(types){if(!types||types==""){return conf.types;}else{var currentTypes=types.split(",");var newTypes=conf.types.split(",");var toMerge=[];var e=0;g=newTypes.length;for(e;e<g;e++){if(types.indexOf(newTypes[e])===-1){toMerge.push(newTypes[e]);};};if(toMerge.length>0){$.merge(currentTypes,toMerge);};return currentTypes.join(",");}};var revalidate=function(){that.validate();controller.checkStatus();};that.active=false;that.enabled=true;that.reference=(function(){var reference;if(that.$element.hasClass("options")){if(that.$element.find('h4').length>0){var h4=that.$element.find('h4');h4.wrapInner('<span>');reference=h4.children();}else if(that.$element.prev().attr('tagName')=='LEGEND'){reference=that.$element.prev();};}else{reference=that.$element;};return reference;})();that.validations=(function(){var collection={};var types=conf.types.split(",");for(var i=0,j=types.length;i<j;i++){for(var val in conf){if(types[i]==val){collection[val]=conf[val];};};};return collection;})();that.conditions=(function(){var collection={};var types=conf.types.split(",");for(var i=0,j=types.length;i<j;i++){for(var val in conf){if(types[i]==val){collection[val]=conf.conditions[val];};};};return collection;})();that.messages=ui.clon(conf.messages);var helper={};helper.uid=that.uid+"#0";helper.type="helper";helper.element=that.element;helper.$element=that.$element;that.helper=ui.helper.call(helper,that);that.validate=function(){if(that.$element.attr('disabled')){return;};if(!that.validations.hasOwnProperty("required")&&that.isEmpty()){return;};if(that.enabled){that.callbacks('beforeValidate');for(var type in that.validations){var condition=that.conditions[type];var value=that.$element.val();var gotError=false;if(type=="required"){gotError=that.isEmpty();};if(condition.patt){gotError=!condition.patt.test(value);};if(condition.expr){gotError=!condition.expr((type.indexOf("Length")>-1)?value.length:value,that.validations[type]);};if(condition.func&&type!="required"){gotError=!condition.func.call(this,value);};if(gotError){that.$element.addClass("error");var text=(that.messages.hasOwnProperty(type))?that.messages[type]:(controller.hasOwnProperty("messages"))?controller.messages[type]:undefined;that.helper.show(text);that.active=true;var event=(that.tag=='OPTIONS'||that.tag=='SELECT')?"change":"blur";that.$element.one(event,that.validate);return;};};};if(that.active||!that.enabled){that.$element.removeClass("error");that.helper.hide();that.active=false;controller.checkStatus();};that.callbacks('afterValidate');return that;};that.reset=function(){that.active=false;that.$element.removeClass("error");that.helper.hide();that.$element.unbind("blur");that.callbacks("reset");return that;};that.isEmpty=function(){that.tag=(that.$element.hasClass("options"))?"OPTIONS":that.element.tagName;switch(that.tag){case'OPTIONS':return that.$element.find('input:checked').length==0;break;case'SELECT':var val=that.$element.val();return val==-1||val==null;break;case'INPUT':case'TEXTAREA':return $.trim(that.$element.val()).length==0;break;};};that.public.uid=that.uid;that.public.element=that.element;that.public.type="watcher";that.public.types=conf.types;that.public.reference=that.reference;that.public.validations=that.validations;that.public.conditions=that.conditions;that.public.messages=that.messages;that.public.helper=that.helper;that.public.active=function(){return that.active;};that.public.and=function(){return that.$element;};that.public.reset=function(){that.reset();return that.public;};that.public.validate=function(){that.validate();return that.public;};that.public.enable=function(){that.enabled=true;return that.public;};that.public.disable=function(){that.enabled=false;return that.public;};that.public.refresh=function(){return that.helper.position("refresh");};var check=checkInstance();if(check){var that={};that.public=check;}else{controller.children.push(that.public);};return that;};ui.sliders=function(){var that=this;var conf=that.conf;that=ui.object.call(that);that.parent=ui.clon(that);that.active=false;return that;};ui.carousel=function(conf){var that=this;that.$element.addClass('ch-carousel');that.$content=that.$element.find('.carousel').addClass('ch-carousel-content').wrap($('<div>').addClass('ch-mask'))
that.conf=conf;that=ui.sliders.call(that);that.parent=ui.clon(that);var page=1;var htmlElementMargin=(ui.utils.html.hasClass("ie6"))?21:20;var extraWidth=(ui.utils.html.hasClass("ie6"))?that.$content.children().outerWidth():0;var htmlContentWidth=that.$content.children().size()*(that.$content.children().outerWidth()+htmlElementMargin)+extraWidth;that.$content.css('width',htmlContentWidth);var $mask=that.$element.find('.ch-mask');var steps=~~((that.$element.width()-70)/(that.$content.children().outerWidth()+20));steps=(steps==0)?1:steps;var totalPages=Math.ceil(that.$content.children().size()/steps);var moveTo=(that.$content.children().outerWidth()+20)*steps;var margin=($mask.width()-moveTo)/2;$mask.width(moveTo).height(that.$content.children().outerHeight()+2);that.buttons={prev:{$element:$('<p class="ch-prev"><span>Previous</span></p>').bind('click',function(){that.move("prev",1)}).css('top',(that.$element.outerHeight()-50)/2),on:function(){that.buttons.prev.$element.addClass("ch-prev-on")},off:function(){that.buttons.prev.$element.removeClass("ch-prev-on")}},next:{$element:$('<p class="ch-next"><span>Next</span></p>').bind('click',function(){that.move("next",1)}).css('top',(that.$element.outerHeight()-50)/2),on:function(){that.buttons.next.$element.addClass("ch-next-on")},off:function(){that.buttons.next.$element.removeClass("ch-next-on")}}};that.move=function(direction,distance){var movement;switch(direction){case"prev":if(that.active||(page-distance)<=0)return;page-=distance;movement=that.$content.position().left+(moveTo*distance);if(page==1)that.buttons.prev.off();that.buttons.next.on();break;case"next":if(that.active||(page+distance)>totalPages)return;page+=distance;movement=that.$content.position().left-(moveTo*distance);if(page==totalPages)that.buttons.next.off();that.buttons.prev.on();break;};that.active=true;var afterMove=function(){that.active=false;if(conf.pager){$(".ch-pager li").removeClass("ch-pager-on");$(".ch-pager li:nth-child("+page+")").addClass("ch-pager-on");};that.callbacks("onMove");};if(ui.features.transition){that.$content.css({left:movement});afterMove();}else{that.$content.animate({left:movement},afterMove);};return that;};that.select=function(pageToGo){if(pageToGo>page){that.move("next",pageToGo-page);}else if(pageToGo<page){that.move("prev",page-pageToGo);};if(conf.pager){$(".ch-pager li").removeClass("ch-pager-on");$(".ch-pager li:nth-child("+page+")").addClass("ch-pager-on");};return that;};that.pager=function(){var list=$("<ul class=\"ch-pager\">");var thumbs=[];for(var i=1,j=totalPages+1;i<j;i+=1){thumbs.push("<li>");thumbs.push(i);thumbs.push("</li>");};list.append(thumbs.join(""));that.$element.append(list);var pager=$(".ch-pager");var contextWidth=pager.parent().width();var pagerWidth=pager.outerWidth();pager.css('left',(contextWidth-pagerWidth)/2);pager.children().each(function(i,e){$(e).bind("click",function(){that.select(i+1);});});};that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.getSteps=function(){return steps;};that.public.getPage=function(){return page;};that.public.moveTo=function(page){that.select(page);return that.public;};that.public.next=function(){that.move("next",1);return that.public;};that.public.prev=function(){that.move("prev",1);return that.public;};that.$content.css('width',htmlContentWidth);that.$element.prepend(that.buttons.prev.$element).append(that.buttons.next.$element);if(htmlContentWidth>$mask.width())that.buttons.next.on();if(conf.pager)that.pager();return that;}
ui.dropdown=function(conf){var that=this;conf.skin=(that.$element.hasClass("ch-secondary"))?"secondary":"primary";that.conf=conf;that=ui.navs.call(that);that.parent=ui.clon(that);that.$container=that.$element.addClass("ch-dropdown");that.$trigger=that.$container.children(":first");that.show=function(event){that.prevent(event);if(that.active){return that.hide(event);};$(ui.instances.dropdown).each(function(i,e){e.hide();});that.$content.css('z-index',ui.utils.zIndex++);that.parent.show(event);that.position("refresh");if(conf.skin=="secondary"){that.$trigger.css('z-index',ui.utils.zIndex++);that.$container.addClass("ch-dropdown-on");};ui.utils.document.one('click',function(event){that.hide(event)});return that;};that.hide=function(event){that.prevent(event);if(!that.active)return;if(conf.skin=="secondary"){that.$container.removeClass("ch-dropdown-on");};that.parent.hide(event);return that;};that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.show=function(){that.show();return that.public;};that.public.hide=function(){that.hide();return that.public;};that.public.position=that.position;that.$trigger.bind("click",function(event){that.show(event)}).addClass("ch-dropdown-trigger-"+conf.skin).append("<span class=\"ch-down\"> &raquo;</span>");that.$content=that.$trigger.next();that.$content.bind("click",function(event){event.stopPropagation();}).addClass("ch-dropdown-content-"+conf.skin).detach();that.$content.find('a').one("click",function(){that.hide()});that.$container.after(that.$content);that.conf.position={};that.conf.position.element=that.$content;that.conf.position.context=that.$trigger;that.conf.position.points="lt lb";that.conf.position.offset="0 -1";ui.positioner.call(that);return that;};ui.layer=function(conf){var that=this;conf.cone=true;conf.classes="box";conf.position={};conf.position.context=that.$element;conf.position.offset=conf.offset||"0 10";conf.position.points=conf.points||"lt lb";that.conf=conf;that=ui.floats.call(that);that.parent=ui.clon(that);var showTime=conf.showTime||400;var hideTime=conf.hideTime||400;var st,ht;var showTimer=function(){st=setTimeout(that.show,showTime)};var hideTimer=function(){ht=setTimeout(that.hide,hideTime)};var clearTimers=function(){clearTimeout(st);clearTimeout(ht);};that.$trigger=that.$element;that.show=function(event){$.each(ui.instances.layer,function(i,e){e.hide();});that.parent.show(event);that.$container.bind('click',function(event){event.stopPropagation()});if(conf.event=="click"){$('<p class="btn ch-close">x</p>').bind('click',that.hide).prependTo(that.$container);$(document).one('click',that.hide);}else{clearTimers();that.$container.one("mouseenter",clearTimers).bind("mouseleave",function(event){var target=event.srcElement||event.target;var relatedTarget=event.relatedTarget||event.toElement;var relatedParent=relatedTarget.parentNode;if(target===relatedTarget||relatedParent===null||target.nodeName==="SELECT")return;hideTimer();});};return that;};that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.content=conf.content||conf.ajax||conf.msg;that.public.show=function(){that.show();return that.public;};that.public.hide=function(){that.hide();return that.public;};that.public.position=that.position;if(conf.event==='click'){conf.closeButton=true;that.$trigger.css('cursor','pointer').bind('click',that.show);}else{that.$trigger.css('cursor','default').bind('mouseenter',that.show).bind('mouseleave',hideTimer);};$("body").bind(ui.events.CHANGE_LAYOUT,function(){that.position("refresh")});return that;};ui.modal=function(conf){var that=this;conf.ajax=(!conf.hasOwnProperty("ajax")&&!conf.hasOwnProperty("content")&&!conf.hasOwnProperty("msg"))?true:conf.ajax;conf.closeButton=(that.type=="modal")?true:false;conf.classes="box";that.conf=conf;that=ui.floats.call(that);that.parent=ui.clon(that);var $dimmer=$('<div>').addClass('ch-dimmer').css({height:ui.utils.window.height(),display:'block'}).hide();var dimmer={on:function(){$dimmer.appendTo('body').css("z-index",ui.utils.zIndex++).fadeIn();if(that.type=="modal"){$dimmer.one("click",function(event){that.hide(event)});}},off:function(){$dimmer.fadeOut('normal',function(){$dimmer.detach();});}};that.$trigger=that.$element;that.show=function(event){dimmer.on();that.parent.show(event);that.$trigger.blur();return that;};that.hide=function(event){dimmer.off();that.parent.hide(event);return that;};that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.content=(conf.content)?conf.content:((conf.ajax===true)?(that.$trigger.attr('href')||that.$trigger.parents('form').attr('action')):conf.ajax);that.public.show=function(){that.show();return that.public;};that.public.hide=function(){that.hide();return that.public;};that.public.position=that.position;that.$trigger.css('cursor','pointer').bind('click',function(event){that.show(event)});return that;};ui.transition=function(conf){conf=conf||{};conf.closeButton=false;conf.msg=conf.msg||"Espere por favor...";conf.content="<div class=\"loading\"></div><p>"+conf.msg+"</p>";return ui.modal.call(this,conf);}
ui.factory({component:'transition'});ui.tabNavigator=function(conf){var that=this;that.$element.addClass('ch-tabNavigator');conf.selected=conf.selected||conf.value||0;that.conf=conf;that=ui.controllers.call(that);that.parent=ui.clon(that);var ul=that.$element.children(':first').addClass('ch-tabNavigator-triggers');var hash=window.location.hash.replace("#!","");var hashed=false;var selected=conf.selected;that.$trigger=ul.find('a');that.$content=ul.next().addClass('ch-tabNavigator-content box');that.select=function(tab){selected=parseInt(tab);tab=that.children[selected];if(tab.active)return;$.each(that.children,function(i,e){if(e.active)e.hide();});tab.shoot();window.location.hash="#!"+tab.$content.attr("id");that.callbacks("onSelect");return that;};that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.children=that.children;that.public.select=function(tab){that.select(tab);return that.public;};that.public.getSelected=function(){return selected;};$.each(that.$trigger,function(i,e){var tab={};tab.uid=that.uid+"#"+i;tab.type="tab";tab.element=e;tab.$element=$(e);that.children.push(ui.tab.call(tab,that));});for(var i=that.children.length;i--;){if(that.children[i].$content.attr("id")===hash){that.select(i);hashed=true;break;};};if(!hashed)that.children[conf.selected].shoot();return that;};ui.tab=function(controller){var that=this;conf={};if(controller.conf.hasOwnProperty("onContentLoad"))conf.onContentLoad=controller.conf.onContentLoad;if(controller.conf.hasOwnProperty("onContentError"))conf.onContentError=controller.conf.onContentError;that.conf=conf;that=ui.navs.call(that);that.parent=ui.clon(that);that.controller=controller;that.$trigger=that.$element.addClass("ch-tabNavigator-trigger");that.$content=(function(){var content=controller.$element.find("#"+that.element.href.split("#")[1]);if(content.length>0){return content;}else{conf.ajax=true;return $("<div id=\"ch-tab"+that.uid+"\">").hide().appendTo(controller.$element.find(".ch-tabNavigator-content"));};})();that.shoot=function(event){that.prevent(event);if(that.$content.html()=="")that.$content.html(that.loadContent());that.show(event);return that;};if(!that.active)that.$content.hide();that.$trigger.bind('click',function(event){that.prevent(event);controller.select(that.uid.split("#")[1]);});return that;}
ui.tooltip=function(conf){var that=this;conf.cone=true;conf.content=that.element.title;conf.position={};conf.position.context=$(that.element);conf.position.offset=conf.offset||"0 10";conf.position.points=conf.points||"lt lb";that.conf=conf;that=ui.floats.call(that);that.parent=ui.clon(that);that.$trigger=that.$element;that.show=function(event){that.$trigger.attr('title','');that.parent.show(event);return that;};that.hide=function(event){that.$trigger.attr('title',conf.content);that.parent.hide(event);return that;};that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.content=conf.content;that.public.show=function(){that.show();return that.public;};that.public.hide=function(){that.hide();return that.public;};that.public.position=that.position;that.$trigger.bind('mouseenter',that.show).bind('mouseleave',that.hide);$("body").bind(ui.events.CHANGE_LAYOUT,function(){that.position("refresh")});return that;};ui.string=function(conf){conf=conf||{};conf.messages=conf.messages||{};if(conf.hasOwnProperty("msg")){conf.messages.string=conf.msg;conf.msg=null;delete conf.msg;};if(!conf.text&&!conf.email&&!conf.url&&!conf.maxLength&&!conf.minLength){conf.text=true;};conf.types="text,email,url,minLength,maxLength";conf.conditions={text:{patt:/^([a-zA-Z\s]+)$/},email:{patt:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/},url:{patt:/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/},minLength:{expr:function(a,b){return a>=b}},maxLength:{expr:function(a,b){return a<=b}}};return ui.watcher.call(this,conf);};ui.email=function(conf){conf=conf||{};conf.email=true;conf.messages={};if(conf.hasOwnProperty("msg")){conf.messages.email=conf.msg;conf.msg=null;delete conf.msg;};return ui.string.call(this,conf);};ui.factory({component:'email'});ui.url=function(conf){conf=conf||{};conf.url=true;conf.messages={};if(conf.hasOwnProperty("msg")){conf.messages.url=conf.msg;conf.msg=null;delete conf.msg;};return ui.string.call(this,conf);};ui.factory({component:'url'});ui.minLength=function(conf){conf=conf||{};conf.minLength=conf.value;conf.messages={};if(conf.hasOwnProperty("msg")){conf.messages.minLength=conf.msg;conf.msg=null;delete conf.msg;};return ui.string.call(this,conf);};ui.factory({component:'minLength'});ui.maxLength=function(conf){conf=conf||{};conf.maxLength=conf.value;conf.messages={};if(conf.hasOwnProperty("msg")){conf.messages.maxLength=conf.msg;conf.msg=null;delete conf.msg;};return ui.string.call(this,conf);};ui.factory({component:'maxLength'});ui.number=function(conf){conf=conf||{};conf.messages=conf.messages||{};if(conf.hasOwnProperty("msg")){conf.messages.number=conf.msg;conf.msg=null;delete conf.msg;};if(!conf.number&&!conf.min&&!conf.max&&!conf.price){conf.number=true;};conf.types="number,min,max,price";conf.conditions={number:{patt:/^([0-9\s]+)$/},min:{expr:function(a,b){return a>=b}},max:{expr:function(a,b){return a<=b}},price:{patt:/^(\d+)[.,]?(\d?\d?)$/}};return ui.watcher.call(this,conf);};ui.min=function(conf){conf=conf||{};conf.min=conf.value;conf.value=null;delete conf.value;conf.messages={};if(conf.hasOwnProperty("msg")){conf.messages.min=conf.msg;conf.msg=null;delete conf.msg;};return ui.number.call(this,conf);};ui.factory({component:'min'});ui.max=function(conf){conf=conf||{};conf.max=conf.value;conf.value=null;delete conf.value;conf.messages={};if(conf.hasOwnProperty("msg")){conf.messages.max=conf.msg;conf.msg=null;delete conf.msg;};return ui.number.call(this,conf);}
ui.factory({component:'max'});ui.price=function(conf){conf=conf||{};conf.price=true;conf.value=null;delete conf.value;conf.messages={};if(conf.hasOwnProperty("msg")){conf.messages.price=conf.msg;conf.msg=null;delete conf.msg;};return ui.number.call(this,conf);}
ui.factory({component:'price'});ui.custom=function(conf){if(!conf.lambda){alert("Custom Validation fatal error: Need a function to evaluate, try $().custom(function(){},\"Message\");");};conf=conf||{};conf.messages=conf.messages||{};if(conf.hasOwnProperty("msg")){conf.messages.custom=conf.msg;conf.msg=null;delete conf.msg;};conf.custom=true;conf.types="custom";conf.conditions={custom:{func:conf.lambda}};return ui.watcher.call(this,conf);};ui.required=function(conf){conf=conf||{};conf.messages={};if(conf.hasOwnProperty("msg")){conf.messages.required=conf.msg;conf.msg=null;delete conf.msg;};conf.required=true;conf.types="required";conf.conditions={required:'that.isEmpty'};return ui.watcher.call(this,conf);};ui.helper=function(controller){var that=this;var conf={};conf.cone=true;conf.position={};conf.position.context=controller.reference;conf.position.offset="15 0";conf.position.points="lt rt";that.conf=conf;that=ui.floats.call(that);that.parent=ui.clon(that);that.$trigger=that.$element;that.show=function(text){conf.content='<p><span class="ico error">Error: </span>'+text+'</p>';that.parent.show();return that;};that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.content=conf.content||conf.ajax||conf.msg;that.public.show=function(text){that.show(text);return that.public;};that.public.hide=function(){that.hide();return that.public;};that.public.position=that.position;$("body").bind(ui.events.CHANGE_LAYOUT,function(){that.position("refresh");});return that;};ui.form=function(conf){if(this.$element.find(":submit").length==0||this.$element.attr("action")==""){alert("Form fatal error: The <input type=submit> is missing, or need to define a action attribute on the form tag.");return;};if(ui.instances.hasOwnProperty("form")&&ui.instances.form.length>0){for(var i=0,j=ui.instances.form.length;i<j;i++){if(ui.instances.form[i].element===this.element){return{exists:true,object:ui.instances.form[i]};};};};var that=this;if(!conf.hasOwnProperty("messages"))conf.messages={};conf.messages["general"]=conf.messages["general"]||"Check for errors.";that.conf=conf;that=ui.controllers.call(that);that.parent=ui.clon(that);var status=true;var $error=$("<p class=\"ch-validator\"><span class=\"ico error\">Error: </span>"+conf.messages["general"]+"</p>");var createError=function(){that.$element.before($error);$("body").trigger(ui.events.CHANGE_LAYOUT);};var removeError=function(){$error.detach();$("body").trigger(ui.events.CHANGE_LAYOUT);};var checkStatus=function(){for(var i=0,j=that.children.length;i<j;i++){if(that.children[i].active()){if(!status)removeError();createError();status=false;return;};};if(!status){removeError();status=true;};};var validate=function(){that.callbacks("beforeValidate");for(var i=0,j=that.children.length;i<j;i++){that.children[i].validate();};checkStatus();status?that.callbacks("onValidate"):that.callbacks("onError");that.callbacks("afterValidate");return that;};var submit=function(event){that.prevent(event);that.callbacks("beforeSubmit");validate();if(status){if(!conf.hasOwnProperty("onSubmit")){that.element.submit();}else{that.callbacks("onSubmit");};};that.callbacks("afterSubmit");return that;};var clear=function(event){that.prevent(event);removeError();for(var i=0,j=that.children.length;i<j;i++)that.children[i].reset();that.callbacks("onClear");return that;};var reset=function(event){clear();that.element.reset();that.callbacks("onReset");return that;};that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.children=that.children;that.public.messages=conf.messages;that.public.validate=function(){validate();return that.public;};that.public.submit=function(){submit();return that.public;};that.public.checkStatus=function(){checkStatus();return that.public;};that.public.getStatus=function(){return status;};that.public.clear=function(){clear();return that.public;};that.public.reset=function(){reset();return that.public;};that.$element.bind("submit",function(event){submit(event);});that.$element.find(":reset, .resetForm").bind("click",function(event){clear(event);});return that;};ui.viewer=function(conf){var that=this;that.conf=conf;that=ui.controllers.call(that);that.parent=ui.clon(that);var $viewer=that.$element.addClass("ch-viewer");var viewerModal={};viewerModal.carouselStruct=$viewer.find("ul").clone().addClass("carousel");viewerModal.carouselStruct.find("img").each(function(i,e){$(e).attr("src","").unwrap();});viewerModal.showContent=function(){$(".ch-viewer-modal-content").parent().addClass("ch-viewer-modal");$(".ch-viewer-modal-content").html(viewerModal.carouselStruct);$(".ch-viewer-modal-content img").each(function(i,e){$(e).attr("src",bigImgs[i]);});that.children[2]=viewerModal.carousel=$(".ch-viewer-modal-content").carousel({pager:true});$(".ch-viewer-modal-content .ch-carousel-content").css("left",0);viewerModal.carousel.moveTo(thumbnails.selected);viewerModal.modal.position();};viewerModal.hideContent=function(){that.move(viewerModal.carousel.getPage());$("ch-viewer-modal").remove();viewerModal.carouselStruct.css("left","0");for(var i=0,j=ui.instances.carousel.length;i<j;i+=1){if(ui.instances.carousel[i].element===viewerModal.carousel.element){ui.instances.carousel.splice(i,1);return;};};};var showcase={};showcase.wrapper=$("<div>").addClass("ch-viewer-display");showcase.display=$viewer.children(":first");$viewer.append(showcase.wrapper.append(showcase.display)).append("<div class=\"ch-lens\">");showcase.wrapper.append("<div class=\"ch-lens\">");showcase.lens=showcase.wrapper.find(".ch-lens");ui.positioner({element:showcase.lens,context:showcase.wrapper});showcase.lens.hide().bind("click",function(){viewerModal.modal.show()});showcase.wrapper.bind("mouseover",function(){showcase.lens.fadeIn(400);}).bind("mouseleave",function(){showcase.lens.fadeOut(400);});showcase.children=showcase.display.find("a");showcase.itemWidth=$(showcase.children[0]).parent().outerWidth();var extraWidth=(ui.utils.html.hasClass("ie6"))?showcase.itemWidth:0;showcase.display.css('width',(showcase.children.length*showcase.itemWidth)+extraWidth).addClass("ch-viewer-content")
showcase.children.bind("click",function(event){that.prevent(event);viewerModal.modal.show();});var thumbnails={};thumbnails.selected=1;thumbnails.wrapper=$("<div>").addClass("ch-viewer-triggers");$viewer.append(thumbnails.wrapper.append($viewer.find("ul").clone().addClass("carousel")));thumbnails.children=thumbnails.wrapper.find("img");thumbnails.children.each(function(i,e){$(e).attr("src",$(e).attr("src").replace("v=V","v=M")).unwrap().bind("click",function(event){that.prevent(event);that.move(i+1);});});that.children[0]=thumbnails.carousel=thumbnails.wrapper.carousel();thumbnails.wrapper.bind("mouseenter",function(){showcase.lens.fadeOut(400);});that.children[1]=viewerModal.modal=$("<a>").modal({content:"<div class=\"ch-viewer-modal-content\">",width:600,height:545,onShow:viewerModal.showContent,onHide:viewerModal.hideContent});that.move=function(item){if(item>showcase.children.length||item<1||isNaN(item))return that;var visibles=thumbnails.carousel.getSteps();var page=thumbnails.carousel.getPage();var nextPage=Math.ceil(item/visibles);$(thumbnails.children[thumbnails.selected-1]).removeClass("ch-thumbnail-on");$(thumbnails.children[item-1]).addClass("ch-thumbnail-on");var movement={left:(-item+1)*showcase.itemWidth};if(ui.features.transition){showcase.display.css(movement);}else{showcase.display.animate(movement);};if(page!=nextPage)thumbnails.carousel.moveTo(nextPage);thumbnails.selected=item;that.callbacks("onMove");return that;};that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.children=that.children;that.public.moveTo=function(page){that.move(page);return that.public;};that.public.next=function(){that.move(thumbnails.selected+1);return that.public;};that.public.prev=function(){that.move(thumbnails.selected-1);return that.public;};that.public.getSelected=function(){return thumbnails.selected;};that.move(1);var bigImgs=[];ui.utils.window.load(function(){setTimeout(function(){showcase.children.each(function(i,e){bigImgs.push($(e).attr("href"));});ui.preload(bigImgs);},250);});return that;};ui.chat=function(conf){var that=ui.object();var getDomain=function(n){switch(n){case"1":return"mercadolidesa.com.ar";break;case"2":return"mercadolistage.com.ar";break;case"3":return"mercadolibre.com.ar";break;}}
if(conf.msg){conf.ruleGroupName=conf.msg;}
that.load=function(){loadChatGZ(conf.ruleGroupName,conf.element.id,conf.style||"block",conf.template||"1",conf.environment||"3");}
ui.get({method:"component",name:"chat",script:"http://www."+getDomain(conf.environment)+"/org-img/jsapi/chat/chatRBIScript.js",callback:function(){that.load();}});that.publish={uid:conf.uid,element:conf.element,type:conf.type}
return that.publish;}
ui.expando=function(conf){var that=this;that.$element.addClass("ch-expando").children(":first").wrapInner("<span class=\"ch-expando-trigger\"></span>");conf.open=conf.open||false;that.conf=conf;that=ui.navs.call(that);that.parent=ui.clon(that);that.$content=that.$element.children().eq(1);that.$trigger=that.$element.find(".ch-expando-trigger");that.show=function(event){that.prevent(event);if(that.active){return that.hide(event);};that.parent.show(event);return that;};that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.show=function(){that.show();return that.public;};that.public.hide=function(){that.hide();return that.public;};that.$trigger.bind('click',function(event){that.show(event);}).addClass('ch-expando-trigger');that.$content.bind('click',function(event){event.stopPropagation()}).addClass('ch-expando-content');if(conf.open)that.show();conf.publish=that.publish;return that;};ui.codelighter=function(){var that=this;that=ui.controllers.call(that);that.parent=ui.clon(that);that.public.uid=that.uid;that.public.element=that.element;that.public.type=that.type;that.public.children=that.children;$("pre[name=code]").each(function(i,e){var codesnippet={};codesnippet.uid=ui.utils.index+=1;codesnippet.type="codesnippet";codesnippet.element=e;codesnippet.snippet=e.innerHTML;that.children.push(ui["code"+e.className.toUpperCase()].call(codesnippet));});ui.instances.codelighter=that.children;return that;};ui.codesnippet=function(conf){var that=this;that.conf=conf;that=ui.object.call(that);that.parent=ui.clon(that);var paint=function(){for(var x in conf.brush){if(conf.brush[x].test(that.paintedSnippet)){that.paintedSnippet=that.paintedSnippet.replace(conf.brush[x],x);};};return that.paintedSnippet;};that.paintedSnippet=that.snippet;that.public={};that.public.uid=that.uid;that.public.type=conf.type;that.public.element=that.element;that.public.snippet=that.snippet;that.public.paintedSnippet=that.paintedSnippet;that.element.innerHTML=paint();return that;};ui.codeXML=function(conf){conf=conf||{};conf.type="codeXML";conf.brush={"&lt;":/</g,"&gt;":/>/g,"<span class='ch-comment'>$&</span>":/(\&lt;|&lt;)!--\s*.*?\s*--(\&gt;|&gt;)/g,"<span class='ch-attrName'>$&</span>":/(id|name|class|title|alt|value|type|style|method|href|action|lang|dir|src|tabindex|usemap|data|rel|charset|encoding|size|selected|checked|placeholder|target|required|disabled|max|min|maxlength|accesskey)=".*"/g,"<span class='ch-attrValue'>$&</span>":/".+?"/g,"<span class='ch-tag'>$&</span>":/(&lt;([a-z]|\/).*?&gt;)/g,"    ":/\t/g};this.snippet=this.snippet||this.element.innerHTML;return ui.codesnippet.call(this,conf);};ui.factory({component:'codeXML'});ui.codeJS=function(conf){conf=conf||{};conf.type="codeJS";conf.brush={"$1 $2 $3":/(<)([a-z]|\/|.*?)(>)/g,"<span class='ch-operator'>$&</span>":/(\+|\-|=|\*|&|\||\%|\!|\?)/g,">":/>amp;/g,"<span class='ch-atom'>$&</span>":/(false|null|true|undefined)/g,"$1<span class='ch-keywords'>$2</span>$3":/(^|\s|\(|\{)(return|new|delete|throw|else|case|break|case|catch|const|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|switch|throw|try|typeof|var|void|while|with)(\s*)/g,"<span class='ch-attrValue'>$&</span>":/(".+?")|[0-9]/g,"    ":/\t/g,"<span class='ch-comment'>$&</span>":/(\/\*)\s*.*\s*(\*\/)/g,"<span class='ch-comment'>$&</span>":/(\/\/)\s*.*\s*\n*/g};this.snippet=this.snippet||this.element.innerHTML;return ui.codesnippet.call(this,conf);};ui.factory({component:'codeJS'});ui.codeCSS=function(conf){conf=conf||{};conf.type="codeCSS";conf.brush={"<span class='ch-comment'>$&</span>":/(\/\*)\s*.*\s*(\*\/)/g,"<span class='ch-attrName'>$&</span>":/(\w)\s*:".*"/g,"<span class='ch-selector'>$1$2</span>$3":/(#|\.)(\w+)({)/g,"$1<span class='ch-property'>$2</span>$3":/({|;|\s)(\w*-*\w*)(\s*:)/g,"$1<span class='ch-attrValue'>$2</span>$3":/(:)(.+?)(;)/g,"    ":/\t/g};this.snippet=this.snippet||this.element.innerHTML;return ui.codesnippet.call(this,conf);};ui.factory({component:'codeCSS'});
ui.init();
})(jQuery);