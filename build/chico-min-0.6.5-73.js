/*!
 * Chico UI 0.6.5-73 MIT Licence
 * @autor <chico@mercadolibre.com>
 * @link http://www.chico-ui.com.ar 
 * @team Natan Santolo, Leandro Linares, Guillermo Paz, Natalia Devalle 
 */;(function($){var ch=window.ch={version:"0.6.5",components:"carousel,chat,custom,dropdown,expando,form,helper,layer,menu,modal,number,required,string,tabNavigator,tooltip,viewer,zoom",internals:"",instances:{},features:{},init:function(){$("html").removeClass("no-js"),ch.features=ch.support(),$(ch.components.split(",")).each(function(a,b){ch.factory({component:b})}),ch.utils.document.bind("keydown",function(a){ch.keyboard(a)})},utils:{body:$("body"),html:$("html"),window:$(window),document:$(document),zIndex:1e3,index:0,isSelector:function(a){if(typeof a!="string")return!1;for(var b in $.expr.match)if($.expr.match[b].test(a)&&$(a).length>0)return!0;return!1},isArray:function(a){return Object.prototype.toString.apply(a)==="[object Array]"},isUrl:function(a){return/^((https?|ftp|file):\/\/|((www|ftp)\.)|(\/|.*\/)*)[a-z0-9-]+((\.|\/)[a-z0-9-]+)+([/?].*)?$/.test(a)},avoidTextSelection:function(){$.each(arguments,function(a,b){$.browser.msie?$(b).attr("unselectable","on"):$.browser.opera?$(b).bind("mousedown",function(){return!1}):$(b).addClass("ch-user-no-select")});return},hasOwn:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)}},events:{CHANGE_LAYOUT:"changeLayout",KEY:{ENTER:"enter",ESC:"esc",LEFT_ARROW:"left_arrow",UP_ARROW:"up_arrow",RIGHT_ARROW:"right_arrow",DOWN_ARROW:"down_arrow"}}};ch.clon=function(a){obj={};for(x in a)obj[x]=a[x];return obj},ch.factory=function(a){if(!a)alert('Factory fatal error: Need and object {component:""} to configure a component.');else{if(!a.component){alert("Factory fatal error: No component defined.");return}var b=a.component,c=function(b){$.fn[b]=function(a){var c=[],d=this,e=arguments;d.each(function(d,f){var g=a||{},h={};h.type=b,h.element=f,h.$element=$(f),h.uid=ch.utils.index+=1;switch(typeof g){case"number":var i=g;g={},g.value=i,e[1]&&(g.msg=e[1]);break;case"string":var j=g;g={},g.msg=j;break;case"function":var k=g;g={},g.lambda=k,e[1]&&(g.msg=e[1])}var l=ch[b].call(h,g);l=ch.utils.hasOwn(l,"public")?l["public"]:l;if(l.type){var m=l.type;ch.instances[m]||(ch.instances[m]=[]),ch.instances[m].push(l)}l.exists&&(l=l.object),c.push(l)});return c.length>1?c:c[0]},a.callback&&a.callback()};ch[a.component]?c(a.component):ch.get({method:"component",component:a.component,script:a.script?a.script:"src/js/"+a.component+".js",styles:a.style?a.style:"src/css/"+b+".css",callback:c})}},ch.get=function(a){switch(a.method){case"content":var b=a.that,c=b.conf,d=ch.utils.hasOwn(b,"controller")?b.controller:b["public"];setTimeout(function(){$.ajax({url:c.ajaxUrl,type:c.ajaxType||"GET",data:c.ajaxParams,cache:!0,async:!0,beforeSend:function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest")},success:function(a,e,f){b.$content.html(a),ch.utils.hasOwn(c,"onContentLoad")&&c.onContentLoad.call(d,a,e,f),ch.utils.hasOwn(c,"position")&&ch.positioner(c.position)},error:function(a,e,f){data=ch.utils.hasOwn(c,"onContentError")?c.onContentError.call(d,a,e,f):"<p>Error on ajax call </p>",b.$content.html(data),ch.utils.hasOwn(c,"position")&&ch.positioner(c.position)}})},0);break;case"component":if(a.style){var e=document.createElement("link");e.href=a.style,e.rel="stylesheet",e.type="text/css"}if(a.script){var f=document.createElement("script");f.src=a.script}var g=document.getElementsByTagName("head")[0]||document.documentElement,h=!1;f.onload=f.onreadystatechange=function(){!h&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(h=!0,a.callback&&a.callback(a.component),f.onload=f.onreadystatechange=null,g&&f.parentNode&&g.removeChild(f))},a.script&&g.insertBefore(f,g.firstChild),a.style&&g.appendChild(e)}},ch.support=function(){var a=document.body||document.documentElement,b=function(){var b=a.style;return b.WebkitTransition!==undefined||b.MozTransition!==undefined||b.OTransition!==undefined||b.transition!==undefined}(),c=function(){var b=!1,c=document.createElement("div");c.style.position="fixed",c.style.top="10px",a.appendChild(c),c.offsetTop===10&&(b=!0),a.removeChild(c);return b}();return{transition:b,fixed:c}},ch.cache={map:{},add:function(a,b){ch.Cache.map[a]=b},get:function(a){return ch.Cache.map[a]},rem:function(a){ch.Cache.map[a]=null,delete ch.Cache.map[a]},flush:function(){delete ch.Cache.map,ch.Cache.map={}}},ch.carousel=function(a){var b=this;a=ch.clon(a),a.pagination=a.pagination||!1,a.rolling=!1,ch.utils.hasOwn(a,"arrows")?a.arrows=a.arrows:a.arrows=!0,ch.utils.hasOwn(a,"fx")?a.fx=a.fx:a.fx=!0,b.conf=a,b=ch.object.call(b),b.parent=ch.clon(b);var c=function(){b.$content=$("<div>").addClass("ch-carousel-content").append(b.$collection),b.$container=$("<div>").addClass("ch-carousel-container").css("height",b.itemSize.height).append(b.$content).appendTo(b.$element),ch.utils.hasOwn(a,"width")&&b.$element.css("width",a.width),ch.utils.hasOwn(a,"height")&&b.$element.css("height",a.height),!a.fx&&ch.features.transition&&b.$content.addClass("ch-carousel-nofx");return},d=function(){b.prevArrow=$("<p>").addClass("ch-prev-arrow").append("<span>Previous</span>").bind("click",b.prev),b.nextArrow=$("<p>").addClass("ch-next-arrow").append("<span>Next</span>").bind("click",b.next),a.rolling||b.prevArrow.addClass("ch-hide"),b.$element.prepend(b.prevArrow).append(b.nextArrow);var c=(b.$element.outerHeight()-b.nextArrow.outerHeight())/2;$(b.prevArrow).css("top",c),$(b.nextArrow).css("top",c);return},e=function(a){a>1&&a<b.pages?(b.prevArrow.removeClass("ch-hide"),b.nextArrow.removeClass("ch-hide")):(a==1&&(b.prevArrow.addClass("ch-hide"),b.nextArrow.removeClass("ch-hide")),a==b.pages&&(b.prevArrow.removeClass("ch-hide"),b.nextArrow.addClass("ch-hide")));return},f=function(){b.$element.find(".ch-carousel-pages").remove(),b.$pagination=$("<ul>").addClass("ch-carousel-pages");for(var a=1;a<=b.pages;a+=1){var c=$("<li>").html(a);a==b.currentPage&&c.addClass("ch-carousel-pages-on"),b.$pagination.append(c)}$.each(b.$pagination.children(),function(a,c){$(c).bind("click",function(){b.goTo(a+1)})}),b.$element.append(b.$pagination),b.$pagination.css("left",(b.$element.outerWidth()-b.$pagination.outerWidth())/2),k=b.$pagination.children();return},g=function(){var a=b.$element.outerWidth()-b.itemSize.width;return a>b.itemSize.width?~~(a/b.itemSize.width):1},h=function(){return Math.ceil(b.items.children.length/b.itemsPerPage)},i=function(){j=b.$container.outerWidth(),b.itemsPerPage=g(),b.pages=h();var c=(j-b.itemSize.width*b.itemsPerPage)/b.itemsPerPage/2;if(!(c<0)){b.$content.detach(),b.goTo(1),$.each(b.items.children,function(a,b){b.style.marginLeft=b.style.marginRight=c+"px"}),b.$content.css("width",(b.itemSize.width+c*2)*b.items.size()+l).appendTo(b.$container),a.pagination&&b.pages>1&&f();return}},j,k,l,m=!1;b.$collection=b.$element.children(),b.items=ch.list(b.$collection.children().toArray()),b.itemSize={width:$(b.items.children[0]).outerWidth(),height:$(b.items.children[0]).outerHeight()},b.currentPage=1,b.goTo=function(c){if(c==b.currentPage||c>b.pages||c<1||isNaN(c))return b;var d=-(j*(c-1));a.fx&&ch.features.transition?b.$content.css("left",d):a.fx?b.$content.animate({left:d}):b.$content.css("left",d),!a.rolling&&a.arrows&&e(c),b.currentPage=c,a.pagination&&k.removeClass("ch-carousel-pages-on").eq(c-1).addClass("ch-carousel-pages-on"),b.callbacks("onMove");return b},b.prev=function(){b.goTo(b.currentPage-1),b.callbacks("onPrev");return b},b.next=function(){b.goTo(b.currentPage+1),b.callbacks("onNext");return b},b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].getItemsPerPage=function(){return b.itemsPerPage},b["public"].getPage=function(){return b.currentPage},b["public"].goTo=function(a){b.goTo(a);return b["public"]},b["public"].next=function(){b.next();return b["public"]},b["public"].prev=function(){b.prev();return b["public"]},b["public"].redraw=function(){i();return b["public"]},b.$element.addClass("ch-carousel"),b.$collection.detach().addClass("ch-carousel-list").children().addClass("ch-carousel-item"),c(),l=ch.utils.html.hasClass("ie6")?b.itemSize.width:0,i(),a.arrows&&b.pages>1&&d(),a.hasOwnProperty("width")||(ch.utils.window.bind("resize",function(){m=!0}),setInterval(function(){!m||(m=!1,i())},250));return b},ch.chat=function(a){var b=ch.object(),c=function(a){switch(a){case"1":return"mercadolidesa.com.ar";case"2":return"mercadolistage.com.ar";case"3":return"mercadolibre.com.ar"}};a.msg&&(a.ruleGroupName=a.msg),b.load=function(){loadChatGZ(a.ruleGroupName,a.element.id,a.style||"block",a.template||"1",a.environment||"3")},ch.get({method:"component",name:"chat",script:"http://www."+c(a.environment)+"/org-img/jsapi/chat/chatRBIScript.js",callback:function(){b.load()}}),b["public"]={uid:a.uid,element:a.element,type:"chat"};return b},ch.codelighter=function(){var a=this;a=ch.controllers.call(a),a.parent=ch.clon(a),a["public"].uid=a.uid,a["public"].element=a.element,a["public"].type=a.type,a["public"].children=a.children,$("pre[name=code]").each(function(b,c){var d={};d.uid=ch.utils.index+=1,d.type="codesnippet",d.element=c,d.snippet=c.innerHTML,a.children.push(ch["code"+c.className.toUpperCase()].call(d))}),ch.instances.codelighter=a.children;return a},ch.codesnippet=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.object.call(b),b.parent=ch.clon(b);var c=function(){for(var c in a.brush)a.brush[c].test(b.paintedSnippet)&&(b.paintedSnippet=b.paintedSnippet.replace(a.brush[c],c));return b.paintedSnippet};b.paintedSnippet=b.snippet,b["public"]={},b["public"].uid=b.uid,b["public"].type=a.type,b["public"].element=b.element,b["public"].snippet=b.snippet,b["public"].paintedSnippet=b.paintedSnippet,b.element.innerHTML=c();return b},ch.codeXML=function(a){a=a||{},a.type="codeXML",a.brush={"&lt;":/</g,"&gt;":/>/g,"<span class='ch-comment'><code></span>":/(\&lt;|&lt;)!--\s*.*?\s*--(\&gt;|&gt;)/g,"<span class='ch-attrName'><code></span>":/(id|name|class|title|alt|value|type|style|method|href|action|lang|dir|src|tabindex|usemap|data|rel|charset|encoding|size|selected|checked|placeholder|target|required|disabled|max|min|maxlength|accesskey)=".*"/g,"<span class='ch-attrValue'><code></span>":/".+?"/g,"<span class='ch-tag'><code></span>":/(&lt;([a-z]|\/).*?&gt;)/g,"    ":/\t/g},this.snippet=this.snippet||this.element.innerHTML;return ch.codesnippet.call(this,a)},ch.factory({component:"codeXML"}),ch.codeJS=function(a){a=a||{},a.type="codeJS",a.brush={"$1 $2 $3":/(<)([a-z]|\/|.*?)(>)/g,"<span class='ch-operator'><code></span>":/(\+|\-|=|\*|&|\||\%|\!|\?)/g,">":/>amp;/g,"<span class='ch-atom'><code></span>":/(false|null|true|undefined)/g,"$1<span class='ch-keywords'>$2</span>$3":/(^|\s|\(|\{)(return|new|delete|throw|else|case|break|case|catch|const|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|switch|throw|try|typeof|var|void|while|with)(\s*)/g,"<span class='ch-attrValue'><code></span>":/(".+?")|[0-9]/g,"    ":/\t/g,"<span class='ch-comment'><code></span>":/(\/\*)\s*.*\s*(\*\/)/g,"<span class='ch-comment'><code></span>":/(\/\/)\s*.*\s*\n*/g},this.snippet=this.snippet||this.element.innerHTML;return ch.codesnippet.call(this,a)},ch.factory({component:"codeJS"}),ch.codeCSS=function(a){a=a||{},a.type="codeCSS",a.brush={"<span class='ch-comment'><code></span>":/(\/\*)\s*.*\s*(\*\/)/g,"<span class='ch-attrName'><code></span>":/(\w)\s*:".*"/g,"<span class='ch-selector'>$1$2</span>$3":/(#|\.)(\w+)({)/g,"$1<span class='ch-property'>$2</span>$3":/({|;|\s)(\w*-*\w*)(\s*:)/g,"$1<span class='ch-attrValue'>$2</span>$3":/(:)(.+?)(;)/g,"    ":/\t/g},this.snippet=this.snippet||this.element.innerHTML;return ch.codesnippet.call(this,a)},ch.factory({component:"codeCSS"}),ch.controllers=function(){var a=this;a=ch.object.call(a),a.parent=ch.clon(a),a.children=[];return a},ch.custom=function(a){a.lambda||alert('Custom Validation fatal error: Need a function to evaluate, try $().custom(function(){},"Message");'),a=a||{},a.messages=a.messages||{},ch.utils.hasOwn(a,"msg")&&(a.messages.custom=a.msg,a.msg=null,delete a.msg),a.custom=!0,a.types="custom",a.conditions=[{name:"custom",func:a.lambda}];return ch.watcher.call(this,a)},ch.dropdown=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.navs.call(b),b.parent=ch.clon(b);var c=function(a){var c=0;$.each(a,function(b,d){$(d).bind("mouseenter",function(){c=b,a.eq(c).focus()})});var d=function(d,e){b.prevent(e);c!=(d=="bottom"?a.length-1:0)&&(a.eq(c).blur(),d=="bottom"?c+=1:c-=1,a.eq(c).focus())};ch.utils.document.bind(ch.events.KEY.UP_ARROW,function(a,b){d("up",b)}),ch.utils.document.bind(ch.events.KEY.DOWN_ARROW,function(a,b){d("bottom",b)})};b.$trigger=b.$element.children().eq(0),b.$content=b.$trigger.next().detach(),b.show=function(a){b.prevent(a),b.$content.css("z-index",ch.utils.zIndex++),b.$element.hasClass("secondary")&&b.$trigger.css("z-index",ch.utils.zIndex++),b.$element.addClass("ch-dropdown-on").css("z-index",ch.utils.zIndex++),b.parent.show(a),b.position("refresh"),$.each(ch.instances.dropdown,function(a,c){c.uid!==b.uid&&c.hide()}),ch.utils.document.one("click "+ch.events.KEY.ESC,function(a){b.hide(a)}),b.$content.find("a").one("click",function(){b.hide()});var d=b.$content.find("a");d.eq(0).focus(),d.length>1&&c(d);return b},b.hide=function(a){b.prevent(a),b.parent.hide(a),b.$element.removeClass("ch-dropdown-on"),ch.utils.document.unbind(ch.events.KEY.ESC+" "+ch.events.KEY.UP_ARROW+" "+ch.events.KEY.DOWN_ARROW);return b},b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b["public"].position=b.position,b.configBehavior(),b.$element.after(b.$content),ch.utils.avoidTextSelection(b.$trigger),b.$element.hasClass("secondary")&&b.$content.addClass("secondary"),b.$content.bind("click",function(a){a.stopPropagation()}),b.conf.position={},b.conf.position.element=b.$content,b.conf.position.context=b.$trigger,b.conf.position.points="lt lb",b.conf.position.offset="0 -1";return b},ch.eraser=function(a){if(typeof a=="number")for(var b in ch.instances){var c=ch.instances[b];for(var d=0,e=c.length;d<e;d+=1)if(c[d].uid==a){delete c[d],c.splice(d,1);return}}else if(a==="meltdown")delete ch.instances,ch.instances={};else for(var b in ch.instances)if(b==a){var c=ch.instances[b];delete ch.instances[b]}},ch.expando=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.navs.call(b),b.parent=ch.clon(b),b.$trigger=b.$element.children().eq(0).wrapInner("<span>").children(),b.$content=b.$element.children().eq(1),b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b.configBehavior(),ch.utils.avoidTextSelection(b.$trigger);return b},ch.floats=function(){var a=this,b=a.conf;a=ch.object.call(a),a.parent=ch.clon(a);var c=function(){$("<div>").addClass("ch-cone").prependTo(a.$container);return},d=function(){$("<div>").addClass("btn close").css("z-index",ch.utils.zIndex++).bind("click",function(b){a.hide(b)}).prependTo(a.$container),ch.utils.document.bind(ch.events.KEY.ESC,function(b){a.hide(b)});return},e=function(){a.$content=$("<div>").addClass("ch-"+a.type+"-content").html(a.loadContent()),a.$container=$("<div>").addClass("ch-"+a.type).css("z-index",ch.utils.zIndex++).append(a.$content).appendTo("body"),ch.utils.hasOwn(b,"classes")&&a.$container.addClass(b.classes),ch.utils.hasOwn(b,"width")&&a.$container.css("width",b.width),ch.utils.hasOwn(b,"height")&&a.$container.css("height",b.height),ch.utils.hasOwn(b,"closeButton")&&b.closeButton&&d(),ch.utils.hasOwn(b,"cone")&&c(),ch.utils.hasOwn(b,"fx")?b.fx=b.fx:b.fx=!0,b.cache=ch.utils.hasOwn(b,"cache")?b.cache:!0,b.fx?a.$container.fadeIn("fast",function(){a.callbacks("onShow")}):(a.$container.show(),a.callbacks("onShow")),b.position=b.position||{},b.position.element=a.$container,b.position.hold=b.hold||!1,ch.positioner.call(a);return};a.active=!1,a.show=function(c){c&&a.prevent(c);if(!a.active){a.active=!0;if(a.$container){b.cache||a.$content.html(a.loadContent());var d=b.content||b.msg;ch.utils.isSelector(d)&&$(d).detach(),a.$container.appendTo("body").css("z-index",ch.utils.zIndex++).fadeIn("fast",function(){a.active=!0,a.callbacks("onShow")}),a.position("refresh");return a}e();return a}},a.hide=function(c){c&&a.prevent(c);if(!!a.active){var d=function(){a.active=!1;var c=b.content||b.msg;if(ch.utils.isSelector(c)){if($("body "+c+".ch-hide").length>0)return!1;a.$content.children().clone().addClass("ch-hide").appendTo("body")}a.callbacks("onHide"),a.$container.detach()};b.fx?a.$container.fadeOut("fast",d):(a.$container.hide(),d());return a}};return a},ch.form=function(a){if(this.$element.find(":submit").length==0||this.$element.attr("action")=="")alert("Form fatal error: The <input type=submit> is missing, or need to define a action attribute on the form tag.");else{if(ch.utils.hasOwn(ch.instances,"form")&&ch.instances.form.length>0)for(var b=0,c=ch.instances.form.length;b<c;b++)if(ch.instances.form[b].element===this.element)return{exists:!0,object:ch.instances.form[b]};var d=this;a=ch.clon(a),ch.utils.hasOwn(a,"messages")||(a.messages={}),a.messages.general=a.messages.general||"Check for errors.",d.$element.attr("novalidate","novalidate"),d.conf=a,d=ch.controllers.call(d),d.parent=ch.clon(d);var e=!0,f=$('<p class="ch-validator"><span class="ico error">Error: </span>'+a.messages.general+"</p>"),g=function(){d.$element.before(f),$("body").trigger(ch.events.CHANGE_LAYOUT)},h=function(){f.detach(),$("body").trigger(ch.events.CHANGE_LAYOUT)},i=function(){for(var a=0,b=d.children.length;a<b;a++)if(d.children[a].active()){e||h(),g(),e=!1,d.children[a].element.focus();return}e||(h(),e=!0)},j=function(){d.callbacks("beforeValidate");for(var a=0,b=d.children.length;a<b;a++)d.children[a].validate();i(),e?d.callbacks("onValidate"):d.callbacks("onError"),d.callbacks("afterValidate");return d},k=function(b){d.prevent(b),d.callbacks("beforeSubmit"),j(),e&&(ch.utils.hasOwn(a,"onSubmit")?d.callbacks("onSubmit"):d.element.submit()),d.callbacks("afterSubmit");return d},l=function(a){d.prevent(a),h();for(var b=0,c=d.children.length;b<c;b++)d.children[b].reset();d.callbacks("onClear");return d},m=function(a){l(),d.element.reset(),d.callbacks("onReset");return d};d["public"].uid=d.uid,d["public"].element=d.element,d["public"].type=d.type,d["public"].children=d.children,d["public"].messages=a.messages,d["public"].validate=function(){j();return d["public"]},d["public"].submit=function(){k();return d["public"]},d["public"].checkStatus=function(){i();return d["public"]},d["public"].getStatus=function(){return e},d["public"].clear=function(){l();return d["public"]},d["public"].reset=function(){m();return d["public"]},ch.utils.hasOwn(a,"onSubmit")&&(d.$element.bind("submit",function(a){d.prevent(a)}),d.$element.find(":submit").unbind("click")),d.$element.bind("submit",function(a){k(a)}),d.$element.find(":reset, .resetForm").bind("click",function(a){m(a)});return d}},ch.helper=function(a){var b=this,c={};c.cone=!0,c.position={},c.position.context=a.reference,c.position.offset="15 0",c.position.points="lt rt",c.cache=!1,b.conf=c,b=ch.floats.call(b),b.parent=ch.clon(b),b.$trigger=b.$element,b.show=function(a){b.active?b.$content.html('<p><span class="ico error">Error: </span>'+a+"</p>"):(c.content='<p><span class="ico error">Error: </span>'+a+"</p>",b.parent.show());return b},b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].content=b.content,b["public"].show=function(a){b.show(a);return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b["public"].position=b.position,$("body").bind(ch.events.CHANGE_LAYOUT,function(){b.position("refresh")});return b},ch.keyboard=function(a){var b={13:"ENTER",27:"ESC",37:"LEFT_ARROW",38:"UP_ARROW",39:"RIGHT_ARROW",40:"DOWN_ARROW"};!ch.utils.hasOwn(b,a.keyCode)||ch.utils.document.trigger(ch.events.KEY[b[a.keyCode]],a)},ch.layer=function(a){var b=this;a=ch.clon(a),a.cone=!0,a.classes="box",a.position={},a.position.context=b.$element,a.position.offset=a.offset||"0 10",a.position.points=a.points||"lt lb",b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c=a.showTime||400,d=a.hideTime||400,e,f,g=function(){e=setTimeout(b.show,c)},h=function(){f=setTimeout(b.hide,d)},i=function(){clearTimeout(e),clearTimeout(f)};b.$trigger=b.$element,b.show=function(c){$.each(ch.instances.layer,function(a,b){b.hide()}),b.parent.show(c),b.$container.bind("click",function(a){a.stopPropagation()}),a.event=="click"?(a.close=!0,$(document).one("click",b.hide)):(i(),b.$container.one("mouseenter",i).one("mouseleave",function(a){var b=a.srcElement||a.target,c=a.relatedTarget||a.toElement,d=c.parentNode;b!==c&&d!==null&&b.nodeName!=="SELECT"&&h()}));return b},b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].content=b.content,b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b["public"].position=b.position,a.event==="click"?(a.closeButton=!0,b.$trigger.css("cursor","pointer").bind("click",b.show)):b.$trigger.css("cursor","default").bind("mouseenter",b.show).bind("mouseleave",h),$("body").bind(ch.events.CHANGE_LAYOUT,function(){b.position("refresh")});return b},ch.list=function(a){var b=this,c=a&&ch.utils.isArray(a)?a:[],d=function(a,d){if(!a)return c;var e=typeof a;if(e==="number"){a--;return d?d.call(b,a):c[a]}var f=h(),g,i;if(e==="string"||e==="object")while(f--){i=c[f];if(i===a)return d?d.call(b,f):i;for(g in i)if(g===a||i[g]===a)return d?d.call(b,f):i}},e=function(a){if(ch.utils.isArray(a)){var b=0,d=a.length;for(b;b<d;b++)c.push(a[b]);return c}return c.push(a)},f=function(a){if(!a)return b;var e=function(a){return c.splice(a,1)[0]};return d(a,e)},g=function(a){return d(a)},h=function(){return c.length},b={children:c,add:e,rem:f,get:g,size:h};return b},ch.menu=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.controllers.call(b),b.parent=ch.clon(b);var c=a.selected-1,d=function(){var a=ch.utils.html.hasClass("ie6")||ch.utils.html.hasClass("ie7")?!1:!0;b.$element.children().each(function(d,e){var f=$(e).children();if(f.eq(0).prop("tagName")=="A")$(e).addClass("ch-bellows").children().addClass("ch-bellows-trigger"),b.children.push(f[0]);else{var g=$(e).expando({fx:a,onShow:function(){c=d}});b.children.push(g)}})},e=function(c){var d,e;if(typeof c=="string"){var f=c.split("#");d=f[0]-1,e=f[1]}else d=c-1;var g=b.children[d];ch.utils.hasOwn(g,"uid")?(g.show(),e&&$(g.element).find("a").eq(e-1).addClass("ch-menu-on"),a.accordion&&$.each(b.children,function(a,c){c.tagName!="A"&&ch.utils.hasOwn(c,"uid")&&b.children[d].uid!=b.children[a].uid&&c.hide()})):b.children[d].addClass("ch-menu-on"),b.callbacks("onSelect");return b},f=function(){$.each(b.children,function(a,b){$(b.element).find(".ch-expando-trigger").unbind("click").bind("click",function(){e(a+1)})});return};b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].select=function(a){e(a);return b["public"]},b.$element.addClass("ch-menu"),d(),a.accordion&&f(),ch.utils.hasOwn(a,"selected")&&e(a.selected);return b},ch.accordion=function(a){a=a||{},a.accordion=!0;return ch.menu.call(this,a)},ch.factory({component:"accordion"}),ch.modal=function(a){var b=this;a=ch.clon(a),a.ajax=!ch.utils.hasOwn(a,"ajax")&&!ch.utils.hasOwn(a,"content")&&!ch.utils.hasOwn(a,"msg")?!0:a.ajax,a.closeButton=b.type=="modal"?!0:!1,a.classes="box",b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c=$("<div>").addClass("ch-dimmer");ch.utils.html.hasClass("ie6")&&c.height(parseInt(document.documentElement.clientHeight,10)*3);var d={on:function(){c.appendTo("body").css("z-index",ch.utils.zIndex++).fadeIn(),b.type=="modal"&&c.one("click",function(a){b.hide(a)}),ch.features.fixed||ch.positioner({element:c}),$("html").hasClass("ie6")&&$("select, object").css("visibility","hidden")},off:function(){c.fadeOut("normal",function(){c.detach(),$("html").hasClass("ie6")&&$("select, object").css("visibility","visible")})}};b.$trigger=b.$element,b.show=function(a){d.on(),b.parent.show(a),b.$trigger.blur();return b},b.hide=function(a){d.off(),b.parent.hide(a);return b},b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].content=b.content,b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b["public"].position=b.position,b.$trigger.css("cursor","pointer").bind("click",function(a){b.show(a)});return b},ch.transition=function(a){a=a||{},a.closeButton=!1,a.msg=a.msg||a.content||"Please wait...",a.content=$("<div>").addClass("loading").after($("<p>").html(a.msg));return ch.modal.call(this,a)},ch.factory({component:"transition"}),ch.navs=function(){var a=this,b=a.conf;b.icon=ch.utils.hasOwn(b,"icon")?b.icon:!0,b.open=b.open||!1,b.fx=b.fx||!1,a=ch.object.call(a),a.parent=ch.clon(a);var c=function(){$("<span>").addClass("ico").html("drop").appendTo(a.$trigger);return};a.active=!1,a.show=function(c){a.prevent(c);if(a.active)return a.hide(c);a.active=!0,a.$trigger.addClass("ch-"+a.type+"-trigger-on"),b.fx?a.$content.slideDown("fast",function(){a.callbacks("onShow")}):(a.$content.removeClass("ch-hide"),a.callbacks("onShow"));return a},a.hide=function(c){a.prevent(c);if(!!a.active){a.active=!1,a.$trigger.removeClass("ch-"+a.type+"-trigger-on"),b.fx?a.$content.slideUp("fast",function(){a.callbacks("onHide")}):(a.$content.addClass("ch-hide"),a.callbacks("onHide"));return a}},a.configBehavior=function(){a.$trigger.addClass("ch-"+a.type+"-trigger").bind("click",function(b){a.show(b)}),a.$content.addClass("ch-"+a.type+"-content ch-hide"),b.icon&&c(),b.open&&a.show();return},a.$element.addClass("ch-"+a.type);return a},ch.number=function(a){a=a||{},a.messages=a.messages||{},ch.utils.hasOwn(a,"msg")&&(a.messages.number=a.msg,a.msg=null,delete a.msg),!a.number&&!a.min&&!a.max&&!a.price&&(a.number=!0),a.types="number,min,max,price",a.conditions=[{name:"number",patt:/^([0-9\s]+)$/},{name:"min",expr:function(a,b){return a>=b}},{name:"max",expr:function(a,b){return a<=b}},{name:"price",patt:/^(\d+)[.,]?(\d?\d?)$/}];return ch.watcher.call(this,a)},ch.min=function(a){a=a||{},a.min=a.value,a.value=null,delete a.value,a.messages={},ch.utils.hasOwn(a,"msg")&&(a.messages.min=a.msg,a.msg=null,delete a.msg);return ch.number.call(this,a)},ch.factory({component:"min"}),ch.max=function(a){a=a||{},a.max=a.value,a.value=null,delete a.value,a.messages={},ch.utils.hasOwn(a,"msg")&&(a.messages.max=a.msg,a.msg=null,delete a.msg);return ch.number.call(this,a)},ch.factory({component:"max"}),ch.price=function(a){a=a||{},a.price=!0,a.value=null,delete a.value,a.messages={},ch.utils.hasOwn(a,"msg")&&(a.messages.price=a.msg,a.msg=null,delete a.msg);return ch.number.call(this,a)},ch.factory({component:"price"}),ch.object=function(){var a=this,b=a.conf;a.prevent=function(b){b&&typeof b=="object"&&(b.preventDefault(),b.stopPropagation());return a},a.content=function(c){if(c===undefined){var c=b.content||b.msg;return c?ch.utils.isSelector(c)?$(c):c:b.ajax===!0?a.$trigger.attr("href")||a.$trigger.parents("form").attr("action"):b.ajax}var d=b.cache;b.cache=!1,ch.utils.isUrl(c)?(b.content=undefined,b.ajax=c):(b.ajax=!1,b.content=c),ch.utils.hasOwn(a,"$content")&&(a.$content.html(a.loadContent()),a.position("refresh")),b.cache=d;return a["public"]},a.loadContent=function(){if(b.ajax===!0){b.ajaxUrl=a.$element.attr("href")||a.$element.parents("form").attr("action"),b.ajaxParams="x=x";if(a.$element.attr("type")=="submit"){b.ajaxType=a.$element.parents("form").attr("method")||"GET";var c=a.$element.parents("form").serialize();b.ajaxParams=b.ajaxParams+(c!=""?"&"+c:"")}ch.get({method:"content",that:a});return'<div class="loading"></div>'}if(b.ajax||b.msg&&ch.utils.isUrl(b.msg)){b.ajaxUrl=b.ajax||b.msg,b.ajaxParams="x=x",ch.get({method:"content",that:a});return'<div class="loading"></div>'}var d=b.content||b.msg;return ch.utils.isSelector(d)?$(d).detach().clone().removeClass("ch-hide").show():d},a.callbacks=function(c){if(ch.utils.hasOwn(b,c)){var d=a.controller?a.controller["public"]:a["public"];return b[c].call(d)}},a.position=function(c){switch(typeof c){case"object":b.position.context=c.context||b.position.context,b.position.points=c.points||b.position.points,b.position.offset=c.offset||b.position.offset,b.position.fixed=c.fixed||b.position.fixed,ch.positioner(b.position);return a["public"];case"string":c!="refresh"&&alert('ChicoUI error: position() expected to find "refresh" parameter.'),ch.positioner(b.position);return a["public"];case"undefined":return b.position}},a["public"]={};return a},ch.positioner=function(a){var b=function(){e=k(),f=p(),d=o(),n()},a=a||this.conf.position;a.points=a.points||"cm cm",a.offset=a.offset||"0 0";var c=$(a.element);c.css("position","absolute");var d,e,f,g={"lt lb":"bottom","lb lt":"top","rt rb":"bottom","rb rt":"top","lt rt":"right","cm cm":"center"},h=a.offset.split(" "),i=parseInt(h[0]),j=parseInt(h[1]),k=function(){var a,b,c,d,e,f,g,h=30;if(typeof window.innerWidth!="undefined"){a=window,b=a.innerWidth-h,c=a.innerHeight,f=a.pageXOffset,g=a.pageYOffset;return{element:a,left:0+i+f-h,top:0+j+g,bottom:c+g,right:b+f,width:b,height:c}}a=document.documentElement,b=a.clientWidth-h,c=a.clientHeight,f=a.scrollLeft,g=a.scrollTop;return{element:a,left:0+i+f,top:0+j+g,bottom:c+g,right:b+f,width:b,height:c}},l=function(a){var b=d.left,e=d.top,f=d.width,g=d.height,h=c.outerWidth(),i=c.outerHeight(),j={ll:b,lr:b+f,rr:b+f-h,cc:b+f/2-h/2},k={tt:e,tb:e+g,bt:e-i,mm:e+g/2-i/2},l={left:j[a.my_x+a.at_x],top:k[a.my_y+a.at_y]};return l},m=function(b,d){var h=l(d);h.direction=g[b];if(a.hold)return h;b=="lt lb"&&h.top+f.top+c.outerHeight()>e.bottom&&(d.my_y="b",d.at_y="t",stylesBottom=h,h=l(d),h.direction="top",h.top-=2*j,h.top+f.top<e.top&&(d.my_y="t",d.at_y="b",h=stylesBottom,h.direction="bottom"));if(h.left+f.left+c.outerWidth()>e.right){d.my_x="r",d.at_x="r",stylesLeft=h;var k=h.direction;h=l(d),h.direction=k+"-right",h.left-=2*i,k=="top"&&(h.top-=2*j),h.left<e.left&&(d.my_y="l",d.at_y="l",h=stylesLeft)}return h},n=function(){var b=a.points.split(" "),e={my_x:b[0].slice(0,1),my_y:b[0].slice(1,2),at_x:b[1].slice(0,1),at_y:b[1].slice(1,2)},f=m(a.points,e);c.css({left:f.left,top:f.top}).removeClass("ch-top ch-left ch-bottom ch-right ch-bottom-right ch-top-right  ch-right-right").addClass("ch-"+f.direction),ch.utils.hasOwn(d,"element")&&d.element!==ch.utils.window[0]&&$(d.element).removeClass("ch-top ch-left ch-bottom ch-right ch-bottom-right ch-top-right ch-right-right").addClass("ch-"+f.direction)},o=function(){if(!a.context)return e;var b=a.context.offset();d={element:a.context,top:b.top+j-f.top,left:b.left+i-f.left,width:a.context.outerWidth(),height:a.context.outerHeight()};return d},p=function(){var a={};a.left=0,a.top=0;var b=c.offsetParent();if(b.css("position")=="relative"){var d=(b.outerWidth()-b.width()-parseInt(b.css("padding-left"))*2)/2;a=b.offset(),a.left-=i-d,a.top-=j}return{left:a.left,top:a.top}},q=!1;ch.utils.window.bind("resize scroll",function(){q=!0}),setInterval(function(){if(!!q){q=!1;if(c.css("display")==="none")return;b()}},250),b();return $(c)},ch.preload=function(a){typeof a=="string"&&(a=a.indexOf(",")>0?a.split(","):[a]);for(var b=0;b<a.length;b++){var c=document.createElement("object");c.data=a[b];var d=document.getElementsByTagName("head")[0];d.appendChild(c),d.removeChild(c)}},ch.required=function(a){a=a||{},a.messages={},ch.utils.hasOwn(a,"msg")&&(a.messages.required=a.msg,a.msg=null,delete a.msg),a.required=!0,a.types="required",a.conditions=[{name:"required"}];return ch.watcher.call(this,a)},ch.sliders=function(){var a=this,b=a.conf;a=ch.object.call(a),a.parent=ch.clon(a),a.active=!1;return a},ch.string=function(a){a=a||{},a.messages=a.messages||{},ch.utils.hasOwn(a,"msg")&&(a.messages.string=a.msg,a.msg=null,delete a.msg),!a.text&&!a.email&&!a.url&&!a.maxLength&&!a.minLength&&(a.text=!0),a.types="text,email,url,minLength,maxLength",a.conditions=[{name:"text",patt:/^([a-zA-Z\s]+)$/},{name:"email",patt:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/},{name:"url",patt:/^((https?|ftp|file):\/\/|((www|ftp)\.)|(\/|.*\/)*)[a-z0-9-]+((\.|\/)[a-z0-9-]+)+([/?].*)?$/},{name:"minLength",expr:function(a,b){return a.length>=b}},{name:"maxLength",expr:function(a,b){return a.length<=b}}];return ch.watcher.call(this,a)},ch.email=function(a){a=a||{},a.email=!0,a.messages={},ch.utils.hasOwn(a,"msg")&&(a.messages.email=a.msg,a.msg=null,delete a.msg);return ch.string.call(this,a)},ch.factory({component:"email"}),ch.url=function(a){a=a||{},a.url=!0,a.messages={},ch.utils.hasOwn(a,"msg")&&(a.messages.url=a.msg,a.msg=null,delete a.msg);return ch.string.call(this,a)},ch.factory({component:"url"}),ch.minLength=function(a){a=a||{},a.minLength=a.value,a.messages={},ch.utils.hasOwn(a,"msg")&&(a.messages.minLength=a.msg,a.msg=null,delete a.msg);return ch.string.call(this,a)},ch.factory({component:"minLength"}),ch.maxLength=function(a){a=a||{},a.maxLength=a.value,a.messages={},ch.utils.hasOwn(a,"msg")&&(a.messages.maxLength=a.msg,a.msg=null,delete a.msg);return ch.string.call(this,a)},ch.factory({component:"maxLength"}),ch.tabNavigator=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.controllers.call(b),b.parent=ch.clon(b);var c=window.location.hash.replace("#!",""),d=!1,e=a.selected-1||a.value-1||0,f=function(){b.$element.children().eq(0).addClass("ch-tabNavigator-triggers").find("a").each(function(a,c){var d={};d.uid=b.uid+"#"+a,d.type="tab",d.element=c,d.$element=$(c),d.controller=b["public"];var f={};f.open=e==a,f.onShow=function(){e=a},ch.utils.hasOwn(b.conf,"onContentLoad")&&(f.onContentLoad=b.conf.onContentLoad),ch.utils.hasOwn(b.conf,"onContentError")&&(f.onContentError=b.conf.onContentError),b.children.push(ch.tab.call(d,f)),$(c).unbind("click").bind("click",function(c){b.prevent(c),g(a+1)})});return},g=function(a){a=b.children[a-1];if(a!==b.children[e]){$.each(b.children,function(b,c){a!==c&&c.hide()}),a.show(),window.location.hash="#!"+a.$content.attr("id"),b.callbacks("onSelect");return b}};b.$content=b.$element.children().eq(1).addClass("ch-tabNavigator-content box"),b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].children=b.children,b["public"].select=function(a){g(a);return b["public"]},b["public"].getSelected=function(){return e+1},b.$element.addClass("ch-tabNavigator"),f();for(var h=b.children.length;h--;)if(b.children[h].$content.attr("id")===c){g(h+1),d=!0;break}return b},ch.tab=function(a){var b=this;a=ch.clon(a),a.icon=!1,b.conf=a,b=ch.navs.call(b),b.parent=ch.clon(b);var c=function(){var c=b.element.href.split("#"),d=b.$element.parents(".ch-tabNavigator"),e=d.find("#"+c[1]);if(e.length>0)return e;a.ajax=!0;return $("<div>").attr("id",c.length==2?c[1]:"ch-tab"+b.uid.replace("#","-")).addClass("ch-hide").appendTo(d.children().eq(1))};b.$trigger=b.$element,b.$content=c(),b.show=function(a){b.prevent(a),b.$content.html()==""&&b.$content.html(b.loadContent()),b.parent.show(a);return b},b.configBehavior();return b},ch.tooltip=function(a){var b=this;a=ch.clon(a),a.cone=!0,a.content=b.element.title,a.position={},a.position.context=$(b.element),a.position.offset=a.offset||"0 10",a.position.points=a.points||"lt lb",b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b),b.$trigger=b.$element,b.show=function(a){b.$trigger.attr("title",""),b.parent.show(a);return b},b.hide=function(c){b.$trigger.attr("title",a.content),b.parent.hide(c);return b},b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].content=b.content,b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b["public"].position=b.position,b.$trigger.bind("mouseenter",b.show).bind("mouseleave",b.hide),$("body").bind(ch.events.CHANGE_LAYOUT,function(){b.position("refresh")});return b},ch.viewer=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.controllers.call(b),b.parent=ch.clon(b);var c=b.$element.addClass("ch-viewer");a.width=c.outerWidth(),a.height=c.outerHeight();var d=c.children().addClass("ch-viewer-content"),e=$("<div>").addClass("ch-viewer-display").append(d).appendTo(c).carousel({width:a.width,arrows:!1,onMove:function(){var a=this,d=a.getPage();b.move(d);var e=$(i[d-1]).height();c.find(".ch-mask").eq(0).height(e)}}),f=d.children(),g=f.length,h=f.children("a"),i=f.find("img, object");if(ch.utils.hasOwn(ch,"zoom")){var j=0;i.filter("img").bind("load",function(){var d=this.parentNode,e={uid:b.uid+"#"+j,type:"zoom",element:d,$element:$(d)},f={context:c,onShow:function(){var b=ch.utils.body.outerWidth()-c.outerWidth(),d=a.width<b?a.width:b-65;this.width(d),this.height(c.height())}};b.children.push(ch.zoom.call(e,f)),j+=1})}var k=function(){var d=$("<ul>").addClass("carousel");$.each(f,function(a,c){var e=$("<li>").bind("click",function(c){b.prevent(c),b.move(a+1)});$(c).children("link[rel=thumb]").length>0?$("<img>").attr("src",$(c).children("link[rel=thumb]").attr("href")).appendTo(e):($(c).children("object").length>0||$(c).children("embed").length>0)&&$("<span>").html("Video").appendTo(e.addClass("ch-viewer-video")),d.append(e)});var e={};e.children=d.children(),e.selected=1,e.carousel=b.children[0]=$("<div>").addClass("ch-viewer-triggers").append(d).appendTo(c).carousel({width:a.width});return e},l=function(a){if(a>g||a<1||isNaN(a))return b;$(n.children[n.selected-1]).removeClass("ch-thumbnail-on"),$(n.children[a-1]).addClass("ch-thumbnail-on"),e.goTo(a);var c=Math.ceil(a/n.carousel.getItemsPerPage());n.carousel.getPage()!=c&&n.carousel.goTo(c),a>1&&a<g?(m.prev.on(),m.next.on()):(a==1&&(m.prev.off(),m.next.on()),a==g&&(m.next.off(),m.prev.on())),n.selected=a,b.callbacks("onMove");return b},m={};m.prev={$element:$("<p>").addClass("ch-viewer-prev").bind("click",function(){b.prev()}),on:function(){m.prev.$element.addClass("ch-viewer-prev-on")},off:function(){m.prev.$element.removeClass("ch-viewer-prev-on")}},m.next={$element:$("<p>").addClass("ch-viewer-next").bind("click",function(){b.next()}),on:function(){m.next.$element.addClass("ch-viewer-next-on")},off:function(){m.next.$element.removeClass("ch-viewer-next-on")}},b.prev=function(){b.move(n.selected-1);return b},b.next=function(){b.move(n.selected+1);return b},b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].children=b.children;if(g>1){b["public"].moveTo=function(a){b.move(a);return b["public"]},b["public"].next=function(){b.next();return b["public"]},b["public"].prev=function(){b.prev();return b["public"]},b["public"].getSelected=function(){return n.selected};var n=k();c.append(m.prev.$element).append(m.next.$element),b.move=l,b.move(1),m.next.on()}c.find(".ch-mask").eq(0).height($(i[0]).height()),ch.utils.avoidTextSelection(b.element);return b},ch.watcher=function(a){var b=this;a=ch.clon(a),b.conf=a,b=ch.object.call(b),b.parent=ch.clon(b);var c=function(){if(!(ch.utils.hasOwn(ch.instances,"form")&&ch.instances.form.length>0)){b.$element.parents("form").form();var d=ch.instances.form.length-1;return ch.instances.form[d]}var a=0,c=ch.instances.form.length;for(a;a<c;a++)if(ch.instances.form[a].element===b.$element.parents("form")[0])return ch.instances.form[a]}(),d=function(){var a=ch.instances.watcher;if(a&&a.length>0)for(var c=0,d=a.length;c<d;c++){if(a[c].element!==b.element)continue;$.merge(a[c].conditions,b.conditions);return{exists:!0,object:a[c]}}},e=function(){b.validate(),c.checkStatus()};b.active=!1,b.enabled=!0,b.reference=function(){var a;if(b.$element.hasClass("options"))if(b.$element.find("h4").length>0){var c=b.$element.find("h4");c.wrapInner("<span>"),a=c.children()}else b.$element.prev().prop("tagName")=="LEGEND"&&(a=b.$element.prev());else a=b.$element;return a}(),b.conditions=function(){var b=[],c=0,d=a.conditions.length;for(c;c<d;c++){var e=a.conditions[c];a[e.name]&&(e.value=a[e.name],a.messages[e.name]&&(e.message=a.messages[e.name]),b.push(e))}return b}(),b.isRequired=function(){var a=b.conditions.length;while(a--){var c=b.conditions[a];if(c.name==="required"&&c.value)return!0}return!1};var f={};f.uid=b.uid+"#0",f.type="helper",f.element=b.element,f.$element=b.$element,b.helper=ch.helper.call(f,b),b.validate=function(a){if(!b.$element.attr("disabled")){var d=b.isRequired();if(!d&&b.isEmpty()&&b.active===!1)return;if(b.enabled&&(b.active===!1||!b.isEmpty()||d)){b.callbacks("beforeValidate");var e=b.conditions.length,f=b.$element.val(),g=!1;while(e--){var h=b.conditions[e];b.isRequired()&&(g=b.isEmpty()),h.patt&&(g=!h.patt.test(f)),h.expr&&(g=!h.expr(f,h.value)),h.func&&(g=!h.func.call(b["public"],f));if(g){b.callbacks("onError"),b.$element.addClass("error");var i=h.message?h.message:ch.utils.hasOwn(c,"messages")?c.messages[h.name]:undefined;b.helper.show(i),b.active=!0;var a=b.tag=="OPTIONS"||b.tag=="SELECT"?"change":"blur";b.$element.one(a,function(a){b.validate(a)});return}}}if(b.active||!b.enabled){b.$element.removeClass("error"),b.helper.hide(),b.active=!1;if(a){var j=a.originalEvent.explicitOriginalTarget||document.activeElement;j.type=="submit"&&c.submit()}c.checkStatus()}b.callbacks("afterValidate");return b}},b.reset=function(){b.active=!1,b.$element.removeClass("error"),b.helper.hide(),b.$element.unbind("blur change",b.validate),b.callbacks("onReset");return b},b.isEmpty=function(){b.tag=b.$element.hasClass("options")?"OPTIONS":b.element.tagName;switch(b.tag){case"OPTIONS":return b.$element.find("input:checked").length===0;case"SELECT":var a=b.$element.val();return parseInt(a)===-1||a===null;case"INPUT":case"TEXTAREA":return $.trim(b.$element.val()).length===0}},b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type="watcher",b["public"].reference=b.reference,b["public"].conditions=b.conditions,b["public"].helper=b.helper["public"],b["public"].active=function(){return b.active},b["public"].and=function(){return b.$element},b["public"].reset=function(){b.reset();return b["public"]},b["public"].validate=function(){b.validate();return b["public"]},b["public"].enable=function(){b.enabled=!0;return b["public"]},b["public"].disable=function(){b.enabled=!1,b.reset();return b["public"]},b["public"].refresh=function(){b.helper.position("refresh");return b["public"]};var g=d();if(g){var b={};b["public"]=g}else c.children.push(b["public"]);return b},ch.zoom=function(a){var b=this;a=ch.clon(a),a.width=a.width||300,a.height=a.height||300,a.fx=!1,a.position={},a.position.context=a.context||b.$element,a.position.offset=a.offset||"20 0",a.position.points=a.points||"lt rt",a.position.hold=!0,b.conf=a,b=ch.floats.call(b),b.parent=ch.clon(b);var c={};c.img=b.$element.children(),c.width=c.img.prop("width"),c.height=c.img.prop("height");var d={};d.img=a.content=$("<img>");var e={};e.shape=$("<div>").addClass("ch-seeker ch-hide").bind("mousemove",function(a){f(a)}).css({width:a.width/3,height:a.height/3});var f=function(b){var f=c.img.offset(),g=b.pageX-f.left,h=b.pageY-f.top;d.img.css({left:-(d.width*g/c.width-a.width/2),top:-(d.height*h/c.height-a.height/2)}),e.shape.css({left:g-e.width,top:h-e.height})};b.$trigger=b.$element,b.show=function(a){b.prevent(a),d.img.prop("src",b.element.href),b.parent.show(),e.shape.removeClass("ch-hide");return b},b.hide=function(a){b.prevent(a),e.shape.addClass("ch-hide"),b.parent.hide();return b},b.enlarge=function(a){b.prevent(a)},b.size=function(f,g){if(!g)return a[f];b.conf[f]=g,b.$container[f](g);var h=c[f]*g/d[f];e.shape[f](h),e[f]=h/2;return b["public"]},b["public"].uid=b.uid,b["public"].element=b.element,b["public"].type=b.type,b["public"].content=b.content,b["public"].show=function(){b.show();return b["public"]},b["public"].hide=function(){b.hide();return b["public"]},b["public"].position=b.position,b["public"].width=function(a){b.size("width",a)},b["public"].height=function(a){b.size("height",a)},setTimeout(function(){b.$element.addClass("ch-zoom-trigger").append(e.shape).css({width:c.width,height:c.height}).bind("mouseenter",b.show).bind("mouseleave",b.hide).bind("mousemove",function(a){f(a)}).bind("click",function(a){b.enlarge(a)})},50),ch.utils.window.one("load",function(){d.img.prop("src",b.element.href).one("load",function(){d.width=d.img.prop("width"),d.height=d.img.prop("height")})});return b}})($);