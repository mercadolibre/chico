<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Carousel - TestCases</title>
	<link rel="stylesheet" type="text/css" href="http://chico.com:8080/latest/css">
	<link href="../libs/css/qunit.css" rel="stylesheet">
	
	<style>
		.testCarousel li,
		.testCarousel2 li, 
		.testCarousel3 li{
			width:120px;
			height:120px;
		}
	</style>
</head>
<body>

	<!-- #body -->
	<h1>Chico-UI: Carousel testcases</h1>
	<div class="box">
		<h2>Elastic Carousel</h2>
		<div class="testCarousel ch-carousel">
			<ul>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>

				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>

				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>

				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>

				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>

				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>

				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>			</ul>
		</div>
	</div>

	<div class="box">
		<h2>Fixed Carousel</h2>
		<div class="testCarousel2 ch-carousel">
			<ul>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
			</ul>
		</div>
	</div>

	<div class="box">
		<h2>Fixed Carousel</h2>
		<div class="testCarousel3 ch-carousel">
			<ul>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_65213880_2657.jpg"></li>
				
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				<li><img src="http://img1.mlstatic.com/s_MLA_v_G_f_98530811_2188.jpg"></li>
				
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
				<li><img src="http://img2.mlstatic.com/s_MLA_v_G_f_62634838_9736.jpg"></li>
			</ul>
		</div>
	</div>
<!-- #body -->
	<hr>

	<h1 id="qunit-header">QUnit Test Suite</h1>
	<h2 id="qunit-banner"></h2>
	<div id="qunit-testrunner-toolbar"></div>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup</div>

	<script src="../libs/js/jquery.js"></script>
	<script src="../libs/js/qunit.js"></script>
	<script src="http://chico.com:8080/latest/js"></script>
	<script src="functions.js"></script>

<!-- #script -->
	<script>
		$.fx.off = true;

		var carousel = $('.testCarousel').carousel({
			onNext: function () {
				$("body").addClass("onNext");
			},
			onPrev: function () {
				$("body").addClass("onPrev");
			}
		});

		var carousel2 = $('.testCarousel2').carousel({
			width: 500,
			height: 150
		});

		var carousel3 = $('.testCarousel3').carousel();
		


		/**
		 * 	Test Cases
		 */

		module("Carousel instance object");

		test("Carousel public properties", function () {

			expect(3);

			ok(carousel.uid >= 0, "Expected to find a \"uid\" attribute on the carousel instance");
	
			ok(carousel.type == "carousel", "Expected to find \"carousel\" as value of type attribute");
	
			ok(ch.utils.hasOwn(carousel, "element"), "Expected to find an \"element\" property");

		});

		test("Carousel public methods", function () {

			expect(5);
	
			ok(ch.utils.hasOwn(carousel, "itemsPerPage"), "Expected to find a \"itemsPerPage\" method");
	
			ok(ch.utils.hasOwn(carousel, "page"), "Expected to find a \"page\" method");
			
			ok(ch.utils.hasOwn(carousel, "next"), "Expected to find a \"next\" method");
			
			ok(ch.utils.hasOwn(carousel, "prev"), "Expected to find a \"prev\" method");
			
			ok(ch.utils.hasOwn(carousel, "redraw"), "Expected to find a \"redraw\" method");

		});

		test("Carousel chain methods", function () {

			expect (1);

			var carouselOriginal = carousel;

			var chaingoto = carousel.page(2);

			ok (chaingoto === carouselOriginal, "Expected to return original instance object on next() method call");

			carousel.page(1);
		});

		module("Carousel layout");
		test("Carousel classes names", function () {
			expect (5);
			var containers = $(carousel.element);
			hasClass(containers, "ch-carousel");
			
			containers = containers.children();
			hasClass(containers, "ch-carousel-mask");

			containers = containers.children();
			hasClass(containers, "ch-carousel-content");

			containers = containers.children();
			hasClass(containers, "ch-carousel-list");

			containers = containers.children();
			hasClass(containers, "ch-carousel-item");
		});
		
		module("Carousel movement interaction");
	   
		test("Next page with next() method", function () {
			
			expect (2);
			
			equal(carousel.page(), 1, "Expected to return first page.");
			
			carousel.next();
			
			equal(carousel.page(), 2, "Expected to return second page.");
			
		});
		
		test("Previous page width prev() method", function () {
			
			expect (1);
			
			carousel.prev();
			
			equal(carousel.page(), 1, "Expected to return first page.");

		});
		
		test("Next page with next button", function () {
			
			expect (2);
			
			equal(carousel.page(), 1, "Expected to return first page.");
						
			$(".testCarousel .ch-next-arrow").click();
			
			equal(carousel.page(), 2, "Expected to return second page.");
			
		});
		
		test("Previous page with prev button", function () {
			
			expect (1);
			
			$(".testCarousel .ch-prev-arrow").click();
			
			equal(carousel.page(), 1, "Expected to return first page.");

		});
		
		test("Go to a specific page with page() method", function () {
			
			expect (1);
			
			var pageToGo = 2;
			
			carousel.page(pageToGo);
			
			equal(carousel.page(), pageToGo, "Expected to return correct page when it was moved.");

		});
		
		
		
		module("Carousel visual interaction");
		
		test("Arrows behavior on Next (from first page to second)", function () {
			
			expect (4);

			carousel.page(1);
			
			hasClass(".testCarousel .ch-prev-arrow", "ch-hide");
			
			hasNotClass(".testCarousel .ch-next-arrow", "ch-hide");

			carousel.next();

			hasNotClass(".testCarousel .ch-prev-arrow", "ch-hide");
			
			hasNotClass(".testCarousel .ch-next-arrow", "ch-hide");

			carousel.prev();

		});
		
		test("Arrows behavior on Prev (on last page)", function () {
			
			expect (4);
			
			var page;
			
			// Go to last page
			do {
				
				page = carousel.page();
				
				carousel.next();
				
			} while (carousel.page() != page);
			
			
			hasNotClass(".testCarousel .ch-prev-arrow", "ch-hide");
			
			hasClass(".testCarousel .ch-next-arrow", "ch-hide");

			carousel.prev();

			hasNotClass(".testCarousel .ch-prev-arrow", "ch-hide");
			
			hasNotClass(".testCarousel .ch-next-arrow", "ch-hide");
			
			// Reset Carousel for next tests (Go to first page)
			carousel.page(1);

		});
		
		
		
		module('Carousel callbacks');	   	
		
		test('Carousel callback on next', function () {
			
			expect (1);
			
			carousel.next();
			
			hasClass("body", "onNext");
			
			$("body").removeClass("onNext");

	   	});
	   	
	   	test('Carousel callback on prev', function () {
			
			expect (1);
			
			carousel.prev();
			
			hasClass("body", "onPrev");
			
			$("body").removeClass("onPrev");

	   	});

	   	
	   	module("Carousel fixed measures");
		test("Width fixed", function () {
			
			expect (1);
			
			equal($(".testCarousel2.ch-carousel").width(), 500, "Expected to find a defined width on the carousel instance");
			
		});
		test("Height fixed", function () {
			
			expect (1);
			
			equal($(".testCarousel2.ch-carousel").height(), 150, "Expected to find a defined height on the carousel instance");

		});


		module("Carousel redraw behaivor");
		test("Redraw behaivor", function () {

			expect (1);

			var oldSteps = carousel2.itemsPerPage();

			$(".testCarousel2").css("width", 220);
			carousel2.redraw();
			
			var currentSteps = carousel2.itemsPerPage();
			
			ok((oldSteps > currentSteps && currentSteps > 0), "Expected to find less items per page after redraw");

		});
 
	</script>

</body>
</html>
